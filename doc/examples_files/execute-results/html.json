{
  "hash": "2d5afd753380715e5f581381e5858f0a",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Examples\n---\n\nThis document demonstrates various ggsql features with runnable examples using CSV files.\n\n\n\n\n\n\n\n\n\n## Basic Visualizations\n\n### Simple Scatter Plot\n\n::: {#dc3ddd64 .cell execution_count=5}\n``` {.ggsql .cell-code}\nSELECT x, y FROM 'data.csv'\nVISUALISE x, y\nDRAW point\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n<div id=\"vis-1771589199497\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":5.2,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":8.7,\"__ggsql_aes_y__\":22.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":12.3,\"__ggsql_aes_y__\":28.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":15.8,\"__ggsql_aes_y__\":35.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":19.4,\"__ggsql_aes_y__\":42.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":23.1,\"__ggsql_aes_y__\":38.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":26.8,\"__ggsql_aes_y__\":45.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":30.2,\"__ggsql_aes_y__\":52.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":33.9,\"__ggsql_aes_y__\":48.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":37.5,\"__ggsql_aes_y__\":55.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":41.2,\"__ggsql_aes_y__\":62.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":44.8,\"__ggsql_aes_y__\":58.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":48.3,\"__ggsql_aes_y__\":65.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":52.1,\"__ggsql_aes_y__\":71.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":55.7,\"__ggsql_aes_y__\":68.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":59.4,\"__ggsql_aes_y__\":74.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label == '10' ? '10' : datum.label == '20' ? '20' : datum.label == '40' ? '40' : datum.label == '30' ? '30' : datum.label\",\"values\":[10.0,20.0,30.0,40.0,50.0,60.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[2.49,62.11],\"zero\":false},\"title\":\"x\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '30' ? '30' : datum.label == '40' ? '40' : datum.label == '70' ? '70' : datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label == '20' ? '20' : datum.label\",\"values\":[20.0,30.0,40.0,50.0,60.0,70.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.695,77.405],\"zero\":false},\"title\":\"y\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"width\":\"container\"};\n    const visId = 'vis-1771589199497';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n::: {#9c02433f .cell execution_count=6}\n``` {.ggsql .cell-code}\nVISUALISE bill_len AS x, bill_dep AS y, species AS color FROM ggsql:penguins\nDRAW point\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div id=\"vis-1771589199580\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.1,\"__ggsql_aes_y__\":18.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.5,\"__ggsql_aes_y__\":17.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.3,\"__ggsql_aes_y__\":18.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":null,\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.7,\"__ggsql_aes_y__\":19.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.3,\"__ggsql_aes_y__\":20.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.9,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.2,\"__ggsql_aes_y__\":19.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":34.1,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.0,\"__ggsql_aes_y__\":20.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.8,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.8,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":17.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.6,\"__ggsql_aes_y__\":21.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":34.6,\"__ggsql_aes_y__\":21.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.6,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.7,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.5,\"__ggsql_aes_y__\":20.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":34.4,\"__ggsql_aes_y__\":18.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":46.0,\"__ggsql_aes_y__\":21.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.8,\"__ggsql_aes_y__\":18.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.7,\"__ggsql_aes_y__\":18.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.9,\"__ggsql_aes_y__\":19.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.2,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.8,\"__ggsql_aes_y__\":17.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.3,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.6,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.5,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.9,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.5,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.5,\"__ggsql_aes_y__\":16.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.2,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.5,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.9,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.4,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.2,\"__ggsql_aes_y__\":21.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.8,\"__ggsql_aes_y__\":20.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.2,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.6,\"__ggsql_aes_y__\":19.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.8,\"__ggsql_aes_y__\":19.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.5,\"__ggsql_aes_y__\":18.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.8,\"__ggsql_aes_y__\":18.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.0,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":44.1,\"__ggsql_aes_y__\":19.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.0,\"__ggsql_aes_y__\":16.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.6,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.5,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.0,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.3,\"__ggsql_aes_y__\":21.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.6,\"__ggsql_aes_y__\":17.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.1,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.0,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.0,\"__ggsql_aes_y__\":19.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":34.5,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.4,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.0,\"__ggsql_aes_y__\":17.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.6,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.5,\"__ggsql_aes_y__\":16.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.6,\"__ggsql_aes_y__\":19.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.7,\"__ggsql_aes_y__\":16.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.3,\"__ggsql_aes_y__\":21.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.6,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":18.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.4,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.6,\"__ggsql_aes_y__\":18.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.5,\"__ggsql_aes_y__\":16.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":19.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.9,\"__ggsql_aes_y__\":16.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.8,\"__ggsql_aes_y__\":19.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":33.5,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.7,\"__ggsql_aes_y__\":18.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.6,\"__ggsql_aes_y__\":17.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":45.8,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.5,\"__ggsql_aes_y__\":17.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.8,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.9,\"__ggsql_aes_y__\":16.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.2,\"__ggsql_aes_y__\":19.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.2,\"__ggsql_aes_y__\":16.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.1,\"__ggsql_aes_y__\":19.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":34.6,\"__ggsql_aes_y__\":17.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.9,\"__ggsql_aes_y__\":17.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.7,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.1,\"__ggsql_aes_y__\":19.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.3,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.3,\"__ggsql_aes_y__\":20.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.3,\"__ggsql_aes_y__\":19.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.9,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.3,\"__ggsql_aes_y__\":19.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.9,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.7,\"__ggsql_aes_y__\":18.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":34.0,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.6,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.2,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.8,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.1,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.3,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":33.1,\"__ggsql_aes_y__\":16.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":43.2,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.0,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.0,\"__ggsql_aes_y__\":20.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.7,\"__ggsql_aes_y__\":16.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.8,\"__ggsql_aes_y__\":20.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.9,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.7,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.6,\"__ggsql_aes_y__\":17.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.2,\"__ggsql_aes_y__\":20.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.1,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":43.2,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.1,\"__ggsql_aes_y__\":16.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":45.6,\"__ggsql_aes_y__\":20.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.7,\"__ggsql_aes_y__\":17.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.2,\"__ggsql_aes_y__\":19.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.6,\"__ggsql_aes_y__\":20.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":42.7,\"__ggsql_aes_y__\":18.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.6,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.3,\"__ggsql_aes_y__\":20.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.7,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.2,\"__ggsql_aes_y__\":17.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.7,\"__ggsql_aes_y__\":19.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.2,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.4,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.2,\"__ggsql_aes_y__\":15.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.6,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.8,\"__ggsql_aes_y__\":17.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.5,\"__ggsql_aes_y__\":18.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.0,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":44.1,\"__ggsql_aes_y__\":18.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.5,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":43.1,\"__ggsql_aes_y__\":19.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.8,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.5,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":38.1,\"__ggsql_aes_y__\":17.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.1,\"__ggsql_aes_y__\":17.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":35.6,\"__ggsql_aes_y__\":17.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.2,\"__ggsql_aes_y__\":20.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.0,\"__ggsql_aes_y__\":16.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.7,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.2,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.6,\"__ggsql_aes_y__\":17.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":32.1,\"__ggsql_aes_y__\":15.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":40.7,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.3,\"__ggsql_aes_y__\":16.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.0,\"__ggsql_aes_y__\":18.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":39.2,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.6,\"__ggsql_aes_y__\":18.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.0,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":37.8,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":36.0,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Adelie\",\"__ggsql_aes_stroke__\":\"Adelie\",\"__ggsql_aes_x__\":41.5,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.1,\"__ggsql_aes_y__\":13.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.0,\"__ggsql_aes_y__\":16.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.7,\"__ggsql_aes_y__\":14.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.0,\"__ggsql_aes_y__\":15.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.6,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.5,\"__ggsql_aes_y__\":13.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.4,\"__ggsql_aes_y__\":14.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.7,\"__ggsql_aes_y__\":15.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.3,\"__ggsql_aes_y__\":13.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.8,\"__ggsql_aes_y__\":15.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":40.9,\"__ggsql_aes_y__\":13.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.0,\"__ggsql_aes_y__\":16.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.5,\"__ggsql_aes_y__\":13.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.4,\"__ggsql_aes_y__\":14.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.8,\"__ggsql_aes_y__\":14.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.3,\"__ggsql_aes_y__\":15.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":42.0,\"__ggsql_aes_y__\":13.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.2,\"__ggsql_aes_y__\":15.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.2,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.7,\"__ggsql_aes_y__\":15.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.2,\"__ggsql_aes_y__\":14.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.1,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.5,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.3,\"__ggsql_aes_y__\":15.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":42.9,\"__ggsql_aes_y__\":13.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.1,\"__ggsql_aes_y__\":15.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.5,\"__ggsql_aes_y__\":14.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.8,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.2,\"__ggsql_aes_y__\":14.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.0,\"__ggsql_aes_y__\":15.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.3,\"__ggsql_aes_y__\":15.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":42.8,\"__ggsql_aes_y__\":14.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.1,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":59.6,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.1,\"__ggsql_aes_y__\":14.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.4,\"__ggsql_aes_y__\":16.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":42.6,\"__ggsql_aes_y__\":13.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.4,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.0,\"__ggsql_aes_y__\":13.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.7,\"__ggsql_aes_y__\":15.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":42.7,\"__ggsql_aes_y__\":13.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.6,\"__ggsql_aes_y__\":16.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.3,\"__ggsql_aes_y__\":13.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.6,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.5,\"__ggsql_aes_y__\":15.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.6,\"__ggsql_aes_y__\":13.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.5,\"__ggsql_aes_y__\":13.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.5,\"__ggsql_aes_y__\":15.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.9,\"__ggsql_aes_y__\":13.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.2,\"__ggsql_aes_y__\":15.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.6,\"__ggsql_aes_y__\":14.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.5,\"__ggsql_aes_y__\":14.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.1,\"__ggsql_aes_y__\":14.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.1,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.5,\"__ggsql_aes_y__\":14.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.0,\"__ggsql_aes_y__\":15.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.8,\"__ggsql_aes_y__\":13.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.5,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.2,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.4,\"__ggsql_aes_y__\":15.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.3,\"__ggsql_aes_y__\":13.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.2,\"__ggsql_aes_y__\":14.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.7,\"__ggsql_aes_y__\":13.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":54.3,\"__ggsql_aes_y__\":15.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.8,\"__ggsql_aes_y__\":14.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.8,\"__ggsql_aes_y__\":16.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.2,\"__ggsql_aes_y__\":14.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.5,\"__ggsql_aes_y__\":16.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.5,\"__ggsql_aes_y__\":14.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.7,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.7,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.4,\"__ggsql_aes_y__\":15.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.2,\"__ggsql_aes_y__\":15.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.5,\"__ggsql_aes_y__\":14.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.4,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.6,\"__ggsql_aes_y__\":16.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.5,\"__ggsql_aes_y__\":14.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":51.1,\"__ggsql_aes_y__\":16.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.2,\"__ggsql_aes_y__\":13.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.2,\"__ggsql_aes_y__\":16.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.1,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":52.5,\"__ggsql_aes_y__\":15.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.4,\"__ggsql_aes_y__\":14.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.0,\"__ggsql_aes_y__\":15.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.9,\"__ggsql_aes_y__\":13.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.8,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.4,\"__ggsql_aes_y__\":14.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":51.3,\"__ggsql_aes_y__\":14.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.5,\"__ggsql_aes_y__\":14.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":52.1,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.5,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":52.2,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.5,\"__ggsql_aes_y__\":14.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.5,\"__ggsql_aes_y__\":16.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.5,\"__ggsql_aes_y__\":14.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.8,\"__ggsql_aes_y__\":15.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.4,\"__ggsql_aes_y__\":15.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.9,\"__ggsql_aes_y__\":14.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.4,\"__ggsql_aes_y__\":14.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":51.1,\"__ggsql_aes_y__\":16.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.5,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":55.9,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.2,\"__ggsql_aes_y__\":15.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.1,\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.3,\"__ggsql_aes_y__\":13.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.8,\"__ggsql_aes_y__\":16.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":41.7,\"__ggsql_aes_y__\":14.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":53.4,\"__ggsql_aes_y__\":15.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.3,\"__ggsql_aes_y__\":14.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.1,\"__ggsql_aes_y__\":15.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.5,\"__ggsql_aes_y__\":15.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.8,\"__ggsql_aes_y__\":15.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":43.5,\"__ggsql_aes_y__\":15.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":51.5,\"__ggsql_aes_y__\":16.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.2,\"__ggsql_aes_y__\":14.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":55.1,\"__ggsql_aes_y__\":16.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":44.5,\"__ggsql_aes_y__\":15.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":48.8,\"__ggsql_aes_y__\":16.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":47.2,\"__ggsql_aes_y__\":13.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":null,\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":46.8,\"__ggsql_aes_y__\":14.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":50.4,\"__ggsql_aes_y__\":15.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":45.2,\"__ggsql_aes_y__\":14.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Gentoo\",\"__ggsql_aes_stroke__\":\"Gentoo\",\"__ggsql_aes_x__\":49.9,\"__ggsql_aes_y__\":16.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.5,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.0,\"__ggsql_aes_y__\":19.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.3,\"__ggsql_aes_y__\":19.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.4,\"__ggsql_aes_y__\":18.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":52.7,\"__ggsql_aes_y__\":19.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.2,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.1,\"__ggsql_aes_y__\":18.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.3,\"__ggsql_aes_y__\":18.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.0,\"__ggsql_aes_y__\":18.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.3,\"__ggsql_aes_y__\":19.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.6,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.7,\"__ggsql_aes_y__\":20.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":47.0,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":52.0,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.9,\"__ggsql_aes_y__\":17.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.5,\"__ggsql_aes_y__\":19.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.3,\"__ggsql_aes_y__\":20.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":58.0,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.4,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.2,\"__ggsql_aes_y__\":18.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":42.4,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":48.5,\"__ggsql_aes_y__\":17.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":43.2,\"__ggsql_aes_y__\":16.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.6,\"__ggsql_aes_y__\":19.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.7,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":52.0,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.5,\"__ggsql_aes_y__\":18.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.5,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.4,\"__ggsql_aes_y__\":17.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":52.8,\"__ggsql_aes_y__\":20.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":40.9,\"__ggsql_aes_y__\":16.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":54.2,\"__ggsql_aes_y__\":20.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":42.5,\"__ggsql_aes_y__\":16.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.0,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.7,\"__ggsql_aes_y__\":18.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":47.5,\"__ggsql_aes_y__\":16.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":47.6,\"__ggsql_aes_y__\":18.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":52.0,\"__ggsql_aes_y__\":20.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.9,\"__ggsql_aes_y__\":16.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":53.5,\"__ggsql_aes_y__\":19.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.0,\"__ggsql_aes_y__\":19.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.2,\"__ggsql_aes_y__\":17.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.9,\"__ggsql_aes_y__\":19.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.5,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.9,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.8,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.1,\"__ggsql_aes_y__\":17.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.0,\"__ggsql_aes_y__\":19.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.5,\"__ggsql_aes_y__\":18.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.8,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":48.1,\"__ggsql_aes_y__\":16.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.4,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.7,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.7,\"__ggsql_aes_y__\":19.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":42.5,\"__ggsql_aes_y__\":17.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":52.2,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.2,\"__ggsql_aes_y__\":16.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.3,\"__ggsql_aes_y__\":19.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.2,\"__ggsql_aes_y__\":18.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.6,\"__ggsql_aes_y__\":19.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":51.9,\"__ggsql_aes_y__\":19.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":46.8,\"__ggsql_aes_y__\":16.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":45.7,\"__ggsql_aes_y__\":17.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":55.8,\"__ggsql_aes_y__\":19.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":43.5,\"__ggsql_aes_y__\":18.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":49.6,\"__ggsql_aes_y__\":18.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.8,\"__ggsql_aes_y__\":19.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Chinstrap\",\"__ggsql_aes_stroke__\":\"Chinstrap\",\"__ggsql_aes_x__\":50.2,\"__ggsql_aes_y__\":18.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"}],\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'Gentoo' ? 'Gentoo' : datum.label == 'Adelie' ? 'Adelie' : datum.label == 'Chinstrap' ? 'Chinstrap' : datum.label\"},\"scale\":{\"domain\":[\"Adelie\",\"Chinstrap\",\"Gentoo\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"species\",\"type\":\"nominal\"},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Gentoo' ? 'Gentoo' : datum.label == 'Adelie' ? 'Adelie' : datum.label == 'Chinstrap' ? 'Chinstrap' : datum.label\"},\"scale\":{\"domain\":[\"Adelie\",\"Chinstrap\",\"Gentoo\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"species\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '40' ? '40' : datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label\",\"values\":[40.0,50.0,60.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[30.725,60.975],\"zero\":false},\"title\":\"bill_len\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '20' ? '20' : datum.label == '16' ? '16' : datum.label == '14' ? '14' : datum.label == '18' ? '18' : datum.label\",\"values\":[14.0,16.0,18.0,20.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[12.68,21.92],\"zero\":false},\"title\":\"bill_dep\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"width\":\"container\"};\n    const visId = 'vis-1771589199580';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Line Chart with Date Scale\n\n::: {#e8ae49c3 .cell execution_count=7}\n``` {.ggsql .cell-code}\nSELECT sale_date, revenue FROM 'sales.csv'\nWHERE category = 'Electronics'\nVISUALISE sale_date AS x, revenue AS y\nDRAW line\nSCALE x VIA date\nLABEL \n    title => 'Electronics Revenue Over Time', \n    x => 'Date', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div id=\"vis-1771589199661\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-10\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-20\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-12\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-06-08\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-07-14\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-08-22\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-09-18\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-10-25\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-11-11\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-12-05\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-29\",\"2023-12-21\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1500' ? '1500' : datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label\",\"values\":[1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[900.0,3100.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Electronics Revenue Over Time\",\"width\":\"container\"};\n    const visId = 'vis-1771589199661';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n::: {#a557d7df .cell execution_count=8}\n``` {.ggsql .cell-code}\nSELECT * FROM ggsql:airquality\nVISUALISE Date AS x\nDRAW line MAPPING Ozone AS y, 'Ozone' AS color\nDRAW line MAPPING Temp AS y, 'Temp' AS color\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n<div id=\"vis-1771589199729\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-01\",\"__ggsql_aes_y__\":41,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-02\",\"__ggsql_aes_y__\":36,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-03\",\"__ggsql_aes_y__\":12,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-04\",\"__ggsql_aes_y__\":18,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-05\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-06\",\"__ggsql_aes_y__\":28,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-07\",\"__ggsql_aes_y__\":23,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-08\",\"__ggsql_aes_y__\":19,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-09\",\"__ggsql_aes_y__\":8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-10\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-11\",\"__ggsql_aes_y__\":7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-12\",\"__ggsql_aes_y__\":16,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-13\",\"__ggsql_aes_y__\":11,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-14\",\"__ggsql_aes_y__\":14,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-15\",\"__ggsql_aes_y__\":18,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-16\",\"__ggsql_aes_y__\":14,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-17\",\"__ggsql_aes_y__\":34,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-18\",\"__ggsql_aes_y__\":6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-19\",\"__ggsql_aes_y__\":30,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-20\",\"__ggsql_aes_y__\":11,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-21\",\"__ggsql_aes_y__\":1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-22\",\"__ggsql_aes_y__\":11,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-23\",\"__ggsql_aes_y__\":4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-24\",\"__ggsql_aes_y__\":32,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-25\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-26\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-27\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-28\",\"__ggsql_aes_y__\":23,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-29\",\"__ggsql_aes_y__\":45,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-30\",\"__ggsql_aes_y__\":115,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-05-31\",\"__ggsql_aes_y__\":37,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-01\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-02\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-03\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-04\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-05\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-06\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-07\",\"__ggsql_aes_y__\":29,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-08\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-09\",\"__ggsql_aes_y__\":71,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-10\",\"__ggsql_aes_y__\":39,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-11\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-12\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-13\",\"__ggsql_aes_y__\":23,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-14\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-15\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-16\",\"__ggsql_aes_y__\":21,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-17\",\"__ggsql_aes_y__\":37,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-18\",\"__ggsql_aes_y__\":20,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-19\",\"__ggsql_aes_y__\":12,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-20\",\"__ggsql_aes_y__\":13,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-21\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-22\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-23\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-24\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-25\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-26\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-27\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-28\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-29\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-06-30\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-01\",\"__ggsql_aes_y__\":135,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-02\",\"__ggsql_aes_y__\":49,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-03\",\"__ggsql_aes_y__\":32,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-04\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-05\",\"__ggsql_aes_y__\":64,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-06\",\"__ggsql_aes_y__\":40,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-07\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-08\",\"__ggsql_aes_y__\":97,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-09\",\"__ggsql_aes_y__\":97,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-10\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-11\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-12\",\"__ggsql_aes_y__\":10,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-13\",\"__ggsql_aes_y__\":27,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-14\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-15\",\"__ggsql_aes_y__\":7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-16\",\"__ggsql_aes_y__\":48,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-17\",\"__ggsql_aes_y__\":35,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-18\",\"__ggsql_aes_y__\":61,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-19\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-20\",\"__ggsql_aes_y__\":63,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-21\",\"__ggsql_aes_y__\":16,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-22\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-23\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-24\",\"__ggsql_aes_y__\":80,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-25\",\"__ggsql_aes_y__\":108,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-26\",\"__ggsql_aes_y__\":20,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-27\",\"__ggsql_aes_y__\":52,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-28\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-29\",\"__ggsql_aes_y__\":50,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-30\",\"__ggsql_aes_y__\":64,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-07-31\",\"__ggsql_aes_y__\":59,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-01\",\"__ggsql_aes_y__\":39,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-02\",\"__ggsql_aes_y__\":9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-03\",\"__ggsql_aes_y__\":16,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-04\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-05\",\"__ggsql_aes_y__\":35,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-06\",\"__ggsql_aes_y__\":66,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-07\",\"__ggsql_aes_y__\":122,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-08\",\"__ggsql_aes_y__\":89,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-09\",\"__ggsql_aes_y__\":110,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-10\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-11\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-12\",\"__ggsql_aes_y__\":44,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-13\",\"__ggsql_aes_y__\":28,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-14\",\"__ggsql_aes_y__\":65,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-15\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-16\",\"__ggsql_aes_y__\":22,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-17\",\"__ggsql_aes_y__\":59,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-18\",\"__ggsql_aes_y__\":23,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-19\",\"__ggsql_aes_y__\":31,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-20\",\"__ggsql_aes_y__\":44,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-21\",\"__ggsql_aes_y__\":21,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-22\",\"__ggsql_aes_y__\":9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-23\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-24\",\"__ggsql_aes_y__\":45,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-25\",\"__ggsql_aes_y__\":168,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-26\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-27\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-28\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-29\",\"__ggsql_aes_y__\":118,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-30\",\"__ggsql_aes_y__\":84,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-08-31\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-01\",\"__ggsql_aes_y__\":96,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-02\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-03\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-04\",\"__ggsql_aes_y__\":91,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-05\",\"__ggsql_aes_y__\":47,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-06\",\"__ggsql_aes_y__\":32,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-07\",\"__ggsql_aes_y__\":20,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-08\",\"__ggsql_aes_y__\":23,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-09\",\"__ggsql_aes_y__\":21,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-10\",\"__ggsql_aes_y__\":24,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-11\",\"__ggsql_aes_y__\":44,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-12\",\"__ggsql_aes_y__\":21,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-13\",\"__ggsql_aes_y__\":28,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-14\",\"__ggsql_aes_y__\":9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-15\",\"__ggsql_aes_y__\":13,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-16\",\"__ggsql_aes_y__\":46,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-17\",\"__ggsql_aes_y__\":18,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-18\",\"__ggsql_aes_y__\":13,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-19\",\"__ggsql_aes_y__\":24,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-20\",\"__ggsql_aes_y__\":16,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-21\",\"__ggsql_aes_y__\":13,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-22\",\"__ggsql_aes_y__\":23,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-23\",\"__ggsql_aes_y__\":36,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-24\",\"__ggsql_aes_y__\":7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-25\",\"__ggsql_aes_y__\":14,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-26\",\"__ggsql_aes_y__\":30,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-27\",\"__ggsql_aes_y__\":null,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-28\",\"__ggsql_aes_y__\":14,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-29\",\"__ggsql_aes_y__\":18,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Ozone\",\"__ggsql_aes_x__\":\"1973-09-30\",\"__ggsql_aes_y__\":20,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-01\",\"__ggsql_aes_y__\":67,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-02\",\"__ggsql_aes_y__\":72,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-03\",\"__ggsql_aes_y__\":74,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-04\",\"__ggsql_aes_y__\":62,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-05\",\"__ggsql_aes_y__\":56,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-06\",\"__ggsql_aes_y__\":66,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-07\",\"__ggsql_aes_y__\":65,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-08\",\"__ggsql_aes_y__\":59,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-09\",\"__ggsql_aes_y__\":61,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-10\",\"__ggsql_aes_y__\":69,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-11\",\"__ggsql_aes_y__\":74,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-12\",\"__ggsql_aes_y__\":69,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-13\",\"__ggsql_aes_y__\":66,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-14\",\"__ggsql_aes_y__\":68,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-15\",\"__ggsql_aes_y__\":58,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-16\",\"__ggsql_aes_y__\":64,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-17\",\"__ggsql_aes_y__\":66,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-18\",\"__ggsql_aes_y__\":57,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-19\",\"__ggsql_aes_y__\":68,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-20\",\"__ggsql_aes_y__\":62,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-21\",\"__ggsql_aes_y__\":59,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-22\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-23\",\"__ggsql_aes_y__\":61,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-24\",\"__ggsql_aes_y__\":61,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-25\",\"__ggsql_aes_y__\":57,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-26\",\"__ggsql_aes_y__\":58,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-27\",\"__ggsql_aes_y__\":57,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-28\",\"__ggsql_aes_y__\":67,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-29\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-30\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-05-31\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-01\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-02\",\"__ggsql_aes_y__\":74,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-03\",\"__ggsql_aes_y__\":67,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-04\",\"__ggsql_aes_y__\":84,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-05\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-06\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-07\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-08\",\"__ggsql_aes_y__\":87,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-09\",\"__ggsql_aes_y__\":90,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-10\",\"__ggsql_aes_y__\":87,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-11\",\"__ggsql_aes_y__\":93,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-12\",\"__ggsql_aes_y__\":92,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-13\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-14\",\"__ggsql_aes_y__\":80,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-15\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-16\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-17\",\"__ggsql_aes_y__\":72,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-18\",\"__ggsql_aes_y__\":65,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-19\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-20\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-21\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-22\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-23\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-24\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-25\",\"__ggsql_aes_y__\":75,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-26\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-27\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-28\",\"__ggsql_aes_y__\":80,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-29\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-06-30\",\"__ggsql_aes_y__\":83,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-01\",\"__ggsql_aes_y__\":84,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-02\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-03\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-04\",\"__ggsql_aes_y__\":84,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-05\",\"__ggsql_aes_y__\":83,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-06\",\"__ggsql_aes_y__\":83,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-07\",\"__ggsql_aes_y__\":88,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-08\",\"__ggsql_aes_y__\":92,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-09\",\"__ggsql_aes_y__\":92,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-10\",\"__ggsql_aes_y__\":89,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-11\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-12\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-13\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-14\",\"__ggsql_aes_y__\":91,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-15\",\"__ggsql_aes_y__\":80,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-16\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-17\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-18\",\"__ggsql_aes_y__\":84,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-19\",\"__ggsql_aes_y__\":87,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-20\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-21\",\"__ggsql_aes_y__\":74,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-22\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-23\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-24\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-25\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-26\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-27\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-28\",\"__ggsql_aes_y__\":88,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-29\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-30\",\"__ggsql_aes_y__\":83,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-07-31\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-01\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-02\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-03\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-04\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-05\",\"__ggsql_aes_y__\":85,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-06\",\"__ggsql_aes_y__\":87,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-07\",\"__ggsql_aes_y__\":89,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-08\",\"__ggsql_aes_y__\":90,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-09\",\"__ggsql_aes_y__\":90,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-10\",\"__ggsql_aes_y__\":92,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-11\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-12\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-13\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-14\",\"__ggsql_aes_y__\":80,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-15\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-16\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-17\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-18\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-19\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-20\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-21\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-22\",\"__ggsql_aes_y__\":72,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-23\",\"__ggsql_aes_y__\":75,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-24\",\"__ggsql_aes_y__\":79,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-25\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-26\",\"__ggsql_aes_y__\":86,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-27\",\"__ggsql_aes_y__\":88,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-28\",\"__ggsql_aes_y__\":97,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-29\",\"__ggsql_aes_y__\":94,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-30\",\"__ggsql_aes_y__\":96,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-08-31\",\"__ggsql_aes_y__\":94,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-01\",\"__ggsql_aes_y__\":91,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-02\",\"__ggsql_aes_y__\":92,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-03\",\"__ggsql_aes_y__\":93,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-04\",\"__ggsql_aes_y__\":93,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-05\",\"__ggsql_aes_y__\":87,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-06\",\"__ggsql_aes_y__\":84,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-07\",\"__ggsql_aes_y__\":80,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-08\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-09\",\"__ggsql_aes_y__\":75,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-10\",\"__ggsql_aes_y__\":73,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-11\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-12\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-13\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-14\",\"__ggsql_aes_y__\":71,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-15\",\"__ggsql_aes_y__\":71,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-16\",\"__ggsql_aes_y__\":78,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-17\",\"__ggsql_aes_y__\":67,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-18\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-19\",\"__ggsql_aes_y__\":68,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-20\",\"__ggsql_aes_y__\":82,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-21\",\"__ggsql_aes_y__\":64,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-22\",\"__ggsql_aes_y__\":71,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-23\",\"__ggsql_aes_y__\":81,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-24\",\"__ggsql_aes_y__\":69,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-25\",\"__ggsql_aes_y__\":63,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-26\",\"__ggsql_aes_y__\":70,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-27\",\"__ggsql_aes_y__\":77,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-28\",\"__ggsql_aes_y__\":75,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-29\",\"__ggsql_aes_y__\":76,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Temp\",\"__ggsql_aes_x__\":\"1973-09-30\",\"__ggsql_aes_y__\":68,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Ozone' ? 'Ozone' : datum.label == 'Temp' ? 'Temp' : datum.label\"},\"scale\":{\"domain\":[\"Ozone\",\"Temp\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '1973-09-10' ? '1973-09-10' : timeFormat(datum.value, '%Y-%m-%d') == '1973-06-18' ? '1973-06-18' : timeFormat(datum.value, '%Y-%m-%d') == '1973-07-16' ? '1973-07-16' : timeFormat(datum.value, '%Y-%m-%d') == '1973-04-23' ? '1973-04-23' : timeFormat(datum.value, '%Y-%m-%d') == '1973-08-13' ? '1973-08-13' : timeFormat(datum.value, '%Y-%m-%d') == '1973-05-21' ? '1973-05-21' : datum.label\",\"values\":[\"1973-04-23\",\"1973-05-21\",\"1973-06-18\",\"1973-07-16\",\"1973-08-13\",\"1973-09-10\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"1973-04-23\",\"1973-10-07\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '150' ? '150' : datum.label == '100' ? '100' : datum.label == '0' ? '0' : datum.label == '50' ? '50' : datum.label\",\"values\":[0.0,50.0,100.0,150.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-7.35,176.35],\"zero\":false},\"title\":\"Ozone\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Ozone' ? 'Ozone' : datum.label == 'Temp' ? 'Temp' : datum.label\"},\"scale\":{\"domain\":[\"Ozone\",\"Temp\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '1973-09-10' ? '1973-09-10' : timeFormat(datum.value, '%Y-%m-%d') == '1973-06-18' ? '1973-06-18' : timeFormat(datum.value, '%Y-%m-%d') == '1973-07-16' ? '1973-07-16' : timeFormat(datum.value, '%Y-%m-%d') == '1973-04-23' ? '1973-04-23' : timeFormat(datum.value, '%Y-%m-%d') == '1973-08-13' ? '1973-08-13' : timeFormat(datum.value, '%Y-%m-%d') == '1973-05-21' ? '1973-05-21' : datum.label\",\"values\":[\"1973-04-23\",\"1973-05-21\",\"1973-06-18\",\"1973-07-16\",\"1973-08-13\",\"1973-09-10\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"1973-04-23\",\"1973-10-07\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '150' ? '150' : datum.label == '100' ? '100' : datum.label == '0' ? '0' : datum.label == '50' ? '50' : datum.label\",\"values\":[0.0,50.0,100.0,150.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-7.35,176.35],\"zero\":false},\"title\":\"Ozone\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"width\":\"container\"};\n    const visId = 'vis-1771589199729';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Bar Chart by Category\n\n::: {#6d115eac .cell execution_count=9}\n``` {.ggsql .cell-code}\nSELECT category, SUM(revenue) as total\nFROM 'sales.csv'\nGROUP BY category\nVISUALISE category AS x, total AS y, category AS fill\nDRAW bar\nLABEL \n    title => 'Total Revenue by Category', \n    x => 'Category', \n    y => 'Total Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=9}\n```{=html}\n<div id=\"vis-1771589199809\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":\"Furniture\",\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":14300.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Clothing\",\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":21700.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Electronics\",\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":22200.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'Furniture' ? 'Furniture' : datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label\"},\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"category\",\"type\":\"nominal\"},\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Furniture' ? 'Furniture' : datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '5000' ? '5000' : datum.label == '0' ? '0' : datum.label == '10000' ? '10000' : datum.label == '15000' ? '15000' : datum.label == '20000' ? '20000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0,20000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-1110.0,23310.0],\"zero\":false},\"title\":\"Total Revenue ($)\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '5000' ? '5000' : datum.label == '0' ? '0' : datum.label == '10000' ? '10000' : datum.label == '15000' ? '15000' : datum.label == '20000' ? '20000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0,20000.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-1110.0,23310.0]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Total Revenue by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589199809';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Line chart with multiple lines with same aesthetics\n\n::: {#6879feb6 .cell execution_count=10}\n``` {.ggsql .cell-code}\nSELECT * FROM 'sales.csv'\nVISUALISE sale_date AS x, revenue AS y\nDRAW line\n    PARTITION BY category\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div id=\"vis-1771589199884\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-02-10\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-04-20\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-05-12\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-06-08\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-07-14\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-08-22\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-09-18\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-10-25\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-11-11\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-12-05\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Electronics\"},{\"__ggsql_aes_x__\":\"2023-01-20\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-02-15\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-03-10\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-04-25\",\"__ggsql_aes_y__\":1300.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-05-18\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-06-12\",\"__ggsql_aes_y__\":1700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-07-20\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-08-28\",\"__ggsql_aes_y__\":2100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-09-22\",\"__ggsql_aes_y__\":2300.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-10-30\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-11-15\",\"__ggsql_aes_y__\":2700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-12-10\",\"__ggsql_aes_y__\":2900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Clothing\"},{\"__ggsql_aes_x__\":\"2023-01-25\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-02-18\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-03-15\",\"__ggsql_aes_y__\":850.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-04-28\",\"__ggsql_aes_y__\":950.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-05-22\",\"__ggsql_aes_y__\":1050.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-06-16\",\"__ggsql_aes_y__\":1150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-07-24\",\"__ggsql_aes_y__\":1250.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-08-30\",\"__ggsql_aes_y__\":1350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-09-26\",\"__ggsql_aes_y__\":1450.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-10-31\",\"__ggsql_aes_y__\":1550.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-11-20\",\"__ggsql_aes_y__\":1650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"},{\"__ggsql_aes_x__\":\"2023-12-15\",\"__ggsql_aes_y__\":1750.0,\"__ggsql_source__\":\"__ggsql_layer_0__\",\"category\":\"Furniture\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"category\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-29\",\"2023-12-31\"],\"zero\":false},\"title\":\"sale_date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1500' ? '1500' : datum.label == '500' ? '500' : datum.label == '1000' ? '1000' : datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"revenue\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"width\":\"container\"};\n    const visId = 'vis-1771589199884';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Statistical Transformations\n\nStatistical transformations automatically compute aggregations for certain geom types.\n\n### Histogram\n\nWhen using `DRAW histogram`, ggsql automatically bins continuous data and counts occurrences. You only need to specify the x aesthetic:\n\n::: {#cfbc0caf .cell execution_count=11}\n``` {.ggsql .cell-code}\nSELECT revenue FROM 'sales.csv'\nVISUALISE revenue AS x\nDRAW histogram\nLABEL\n    title => 'Revenue Distribution',\n    x => 'Revenue ($)',\n    y => 'Count'\n```\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=html}\n<div id=\"vis-1771589199972\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":1220.68965517275,\"__ggsql_aes_xend__\":1303.44827586245,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2131.0344827594495,\"__ggsql_aes_xend__\":2213.7931034491494,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":724.1379310345501,\"__ggsql_aes_xend__\":806.8965517242501,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2048.27586206975,\"__ggsql_aes_xend__\":2131.03448275945,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2296.5517241388497,\"__ggsql_aes_xend__\":2379.3103448285497,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1882.75862069035,\"__ggsql_aes_xend__\":1965.51724138005,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":558.62068965515,\"__ggsql_aes_xend__\":641.3793103448501,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2544.8275862079495,\"__ggsql_aes_xend__\":2627.5862068976494,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2958.6206896564495,\"__ggsql_aes_xend__\":3041.3793103461494,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1551.72413793155,\"__ggsql_aes_xend__\":1634.4827586212498,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1717.24137931095,\"__ggsql_aes_xend__\":1800.0000000006498,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2627.58620689765,\"__ggsql_aes_xend__\":2710.3448275873498,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":972.41379310365,\"__ggsql_aes_xend__\":1055.17241379335,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1137.93103448305,\"__ggsql_aes_xend__\":1220.6896551727498,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1634.48275862125,\"__ggsql_aes_xend__\":1717.24137931095,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1055.17241379335,\"__ggsql_aes_xend__\":1137.93103448305,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":889.65517241395,\"__ggsql_aes_xend__\":972.41379310365,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1386.20689655215,\"__ggsql_aes_xend__\":1468.96551724185,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":806.89655172425,\"__ggsql_aes_xend__\":889.65517241395,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1303.44827586245,\"__ggsql_aes_xend__\":1386.20689655215,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2379.3103448285497,\"__ggsql_aes_xend__\":2462.0689655182496,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2462.06896551825,\"__ggsql_aes_xend__\":2544.82758620795,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":641.3793103448501,\"__ggsql_aes_xend__\":724.1379310345501,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1965.51724138005,\"__ggsql_aes_xend__\":2048.27586206975,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1468.96551724185,\"__ggsql_aes_xend__\":1551.72413793155,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2875.8620689667496,\"__ggsql_aes_xend__\":2958.6206896564495,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '500' ? '500' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '1500' ? '1500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[434.48275862060007,3165.5172413806995],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"x2\":{\"axis\":{\"labelExpr\":\"datum.label == '500' ? '500' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '1500' ? '1500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_xend__\",\"scale\":{\"domain\":[434.48275862060007,3165.5172413806995]},\"title\":null,\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1' ? '1' : datum.label == '1.5' ? '1.5' : datum.label == '2' ? '2' : datum.label == '0.5' ? '0.5' : datum.label == '0' ? '0' : datum.label\",\"values\":[0.0,0.5,1.0,1.5,2.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.1,2.1],\"zero\":false},\"title\":\"Count\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '1' ? '1' : datum.label == '1.5' ? '1.5' : datum.label == '2' ? '2' : datum.label == '0.5' ? '0.5' : datum.label == '0' ? '0' : datum.label\",\"values\":[0.0,0.5,1.0,1.5,2.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.1,2.1]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Distribution\",\"width\":\"container\"};\n    const visId = 'vis-1771589199972';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Bar with Automatic Count\n\nWhen using `DRAW bar` without a y aesthetic, ggsql automatically counts occurrences of each x value:\n\n::: {#4094c5ed .cell execution_count=12}\n``` {.ggsql .cell-code}\nSELECT category FROM 'sales.csv'\nVISUALISE category AS x\nDRAW bar\nLABEL\n    title => 'Sales Count by Category',\n    x => 'Category',\n    y => 'Count'\n```\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=html}\n<div id=\"vis-1771589200048\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":12,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":12,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":12,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '0' ? '0' : datum.label == '5' ? '5' : datum.label == '10' ? '10' : datum.label\",\"values\":[0.0,5.0,10.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.6000000000000001,12.6],\"zero\":false},\"title\":\"Count\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '0' ? '0' : datum.label == '5' ? '5' : datum.label == '10' ? '10' : datum.label\",\"values\":[0.0,5.0,10.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.6000000000000001,12.6]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Sales Count by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589200048';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Bar with Weighted Count\n\nYou can also specify a weight aesthetic to sum values instead of counting:\n\n::: {#a7adf496 .cell execution_count=13}\n``` {.ggsql .cell-code}\nSELECT category, revenue FROM 'sales.csv'\nVISUALISE category AS x, revenue AS weight\nDRAW bar\nLABEL\n    title => 'Total Revenue by Category',\n    x => 'Category',\n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<div id=\"vis-1771589200127\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":22200.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":14300.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":21700.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Furniture' ? 'Furniture' : datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Clothing' ? 'Clothing' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '20000' ? '20000' : datum.label == '0' ? '0' : datum.label == '15000' ? '15000' : datum.label == '10000' ? '10000' : datum.label == '5000' ? '5000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0,20000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-1110.0,23310.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '20000' ? '20000' : datum.label == '0' ? '0' : datum.label == '15000' ? '15000' : datum.label == '10000' ? '10000' : datum.label == '5000' ? '5000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0,20000.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-1110.0,23310.0]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Total Revenue by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589200127';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Histogram Settings\n\nControl histogram binning with `SETTING` options:\n\n**Custom number of bins:**\n\n::: {#d93c32c3 .cell execution_count=14}\n``` {.ggsql .cell-code}\nSELECT revenue FROM 'sales.csv'\nVISUALISE revenue AS x\nDRAW histogram \n    SETTING bins => 10\nLABEL\n    title => 'Revenue Distribution (10 bins)',\n    x => 'Revenue ($)',\n    y => 'Count'\n```\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<div id=\"vis-1771589200241\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":2333.33333333355,\"__ggsql_aes_xend__\":2600.00000000025,\"__ggsql_aes_y__\":3,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":466.66666666665,\"__ggsql_aes_xend__\":733.3333333333501,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2066.6666666668502,\"__ggsql_aes_xend__\":2333.3333333335504,\"__ggsql_aes_y__\":3,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1000.00000000005,\"__ggsql_aes_xend__\":1266.66666666675,\"__ggsql_aes_y__\":6,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1533.33333333345,\"__ggsql_aes_xend__\":1800.0000000001498,\"__ggsql_aes_y__\":6,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2866.6666666669503,\"__ggsql_aes_xend__\":3133.3333333336504,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2600.00000000025,\"__ggsql_aes_xend__\":2866.6666666669503,\"__ggsql_aes_y__\":1,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1800.0000000001498,\"__ggsql_aes_xend__\":2066.66666666685,\"__ggsql_aes_y__\":3,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":733.33333333335,\"__ggsql_aes_xend__\":1000.00000000005,\"__ggsql_aes_y__\":5,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1266.66666666675,\"__ggsql_aes_xend__\":1533.33333333345,\"__ggsql_aes_y__\":5,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '1500' ? '1500' : datum.label == '2500' ? '2500' : datum.label == '500' ? '500' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '3000' ? '3000' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[333.3333333333,3266.6666666670003],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"x2\":{\"axis\":{\"labelExpr\":\"datum.label == '1500' ? '1500' : datum.label == '2500' ? '2500' : datum.label == '500' ? '500' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '3000' ? '3000' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_xend__\",\"scale\":{\"domain\":[333.3333333333,3266.6666666670003]},\"title\":null,\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '0' ? '0' : datum.label == '4' ? '4' : datum.label == '6' ? '6' : datum.label == '2' ? '2' : datum.label\",\"values\":[0.0,2.0,4.0,6.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.30000000000000004,6.3],\"zero\":false},\"title\":\"Count\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '0' ? '0' : datum.label == '4' ? '4' : datum.label == '6' ? '6' : datum.label == '2' ? '2' : datum.label\",\"values\":[0.0,2.0,4.0,6.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.30000000000000004,6.3]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Distribution (10 bins)\",\"width\":\"container\"};\n    const visId = 'vis-1771589200241';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n**Explicit bin width** (overrides bins):\n\n::: {#48894ca8 .cell execution_count=15}\n``` {.ggsql .cell-code}\nSELECT revenue FROM 'sales.csv'\nVISUALISE revenue AS x\nDRAW histogram \n    SETTING binwidth => 500\nLABEL\n    title => 'Revenue Distribution (500 bin width)',\n    x => 'Revenue ($)',\n    y => 'Count'\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<div id=\"vis-1771589200327\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":2850.0,\"__ggsql_aes_xend__\":3350.0,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":350.0,\"__ggsql_aes_xend__\":850.0,\"__ggsql_aes_y__\":4,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1350.0,\"__ggsql_aes_xend__\":1850.0,\"__ggsql_aes_y__\":9,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1850.0,\"__ggsql_aes_xend__\":2350.0,\"__ggsql_aes_y__\":6,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2350.0,\"__ggsql_aes_xend__\":2850.0,\"__ggsql_aes_y__\":4,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":850.0,\"__ggsql_aes_xend__\":1350.0,\"__ggsql_aes_y__\":11,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '2000' ? '2000' : datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,2000.0,3000.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[200.0,3500.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"x2\":{\"axis\":{\"labelExpr\":\"datum.label == '2000' ? '2000' : datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,2000.0,3000.0]},\"field\":\"__ggsql_aes_xend__\",\"scale\":{\"domain\":[200.0,3500.0]},\"title\":null,\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '7.5' ? '7.5' : datum.label == '0' ? '0' : datum.label == '5' ? '5' : datum.label == '2.5' ? '2.5' : datum.label == '10' ? '10' : datum.label\",\"values\":[0.0,2.5,5.0,7.5,10.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.55,11.55],\"zero\":false},\"title\":\"Count\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '7.5' ? '7.5' : datum.label == '0' ? '0' : datum.label == '5' ? '5' : datum.label == '2.5' ? '2.5' : datum.label == '10' ? '10' : datum.label\",\"values\":[0.0,2.5,5.0,7.5,10.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.55,11.55]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Distribution (500 bin width)\",\"width\":\"container\"};\n    const visId = 'vis-1771589200327';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n**Left-closed intervals** (default is right-closed `(a, b]`):\n\n::: {#3fd2a40f .cell execution_count=16}\n``` {.ggsql .cell-code}\nSELECT revenue FROM 'sales.csv'\nVISUALISE revenue AS x\nDRAW histogram \n    SETTING bins => 8, closed => 'left'\nLABEL\n    title => 'Revenue Distribution (left-closed intervals)',\n    x => 'Revenue ($)',\n    y => 'Count'\n```\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=html}\n<div id=\"vis-1771589200413\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":1114.28571428565,\"__ggsql_aes_xend__\":1457.1428571427498,\"__ggsql_aes_y__\":7,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2828.5714285711497,\"__ggsql_aes_xend__\":3171.4285714282496,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":771.42857142855,\"__ggsql_aes_xend__\":1114.28571428565,\"__ggsql_aes_y__\":8,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2142.85714285695,\"__ggsql_aes_xend__\":2485.7142857140498,\"__ggsql_aes_y__\":3,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2485.7142857140498,\"__ggsql_aes_xend__\":2828.5714285711497,\"__ggsql_aes_y__\":3,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":428.5714285714501,\"__ggsql_aes_xend__\":771.42857142855,\"__ggsql_aes_y__\":2,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1457.14285714275,\"__ggsql_aes_xend__\":1799.99999999985,\"__ggsql_aes_y__\":6,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1799.99999999985,\"__ggsql_aes_xend__\":2142.85714285695,\"__ggsql_aes_y__\":5,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label\",\"values\":[1000.0,2000.0,3000.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[291.4285714286101,3308.5714285710897],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"x2\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label\",\"values\":[1000.0,2000.0,3000.0]},\"field\":\"__ggsql_aes_xend__\",\"scale\":{\"domain\":[291.4285714286101,3308.5714285710897]},\"title\":null,\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '2' ? '2' : datum.label == '0' ? '0' : datum.label == '4' ? '4' : datum.label == '6' ? '6' : datum.label == '8' ? '8' : datum.label\",\"values\":[0.0,2.0,4.0,6.0,8.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.4,8.4],\"zero\":false},\"title\":\"Count\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '2' ? '2' : datum.label == '0' ? '0' : datum.label == '4' ? '4' : datum.label == '6' ? '6' : datum.label == '8' ? '8' : datum.label\",\"values\":[0.0,2.0,4.0,6.0,8.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.4,8.4]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Distribution (left-closed intervals)\",\"width\":\"container\"};\n    const visId = 'vis-1771589200413';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Histogram Remapping\n\nHistogram computes several statistics: `bin`, `bin_end`, `count`, and `density`. By default, `count` is mapped to `y`. Use `REMAPPING` to show density (proportion) instead:\n\n::: {#c46b448b .cell execution_count=17}\n``` {.ggsql .cell-code}\nSELECT revenue FROM 'sales.csv'\nVISUALISE revenue AS x\nDRAW histogram \n    REMAPPING density AS y\nLABEL\n    title => 'Revenue Density Distribution',\n    x => 'Revenue ($)',\n    y => 'Density'\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<div id=\"vis-1771589200500\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":1220.68965517275,\"__ggsql_aes_xend__\":1303.44827586245,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2131.0344827594495,\"__ggsql_aes_xend__\":2213.7931034491494,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":724.1379310345501,\"__ggsql_aes_xend__\":806.8965517242501,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2048.27586206975,\"__ggsql_aes_xend__\":2131.03448275945,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2296.5517241388497,\"__ggsql_aes_xend__\":2379.3103448285497,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1882.75862069035,\"__ggsql_aes_xend__\":1965.51724138005,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":558.62068965515,\"__ggsql_aes_xend__\":641.3793103448501,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2544.8275862079495,\"__ggsql_aes_xend__\":2627.5862068976494,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2958.6206896564495,\"__ggsql_aes_xend__\":3041.3793103461494,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1551.72413793155,\"__ggsql_aes_xend__\":1634.4827586212498,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1717.24137931095,\"__ggsql_aes_xend__\":1800.0000000006498,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2627.58620689765,\"__ggsql_aes_xend__\":2710.3448275873498,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":972.41379310365,\"__ggsql_aes_xend__\":1055.17241379335,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1137.93103448305,\"__ggsql_aes_xend__\":1220.6896551727498,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1634.48275862125,\"__ggsql_aes_xend__\":1717.24137931095,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1055.17241379335,\"__ggsql_aes_xend__\":1137.93103448305,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":889.65517241395,\"__ggsql_aes_xend__\":972.41379310365,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1386.20689655215,\"__ggsql_aes_xend__\":1468.96551724185,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":806.89655172425,\"__ggsql_aes_xend__\":889.65517241395,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1303.44827586245,\"__ggsql_aes_xend__\":1386.20689655215,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2379.3103448285497,\"__ggsql_aes_xend__\":2462.0689655182496,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2462.06896551825,\"__ggsql_aes_xend__\":2544.82758620795,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":641.3793103448501,\"__ggsql_aes_xend__\":724.1379310345501,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1965.51724138005,\"__ggsql_aes_xend__\":2048.27586206975,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":1468.96551724185,\"__ggsql_aes_xend__\":1551.72413793155,\"__ggsql_aes_y__\":0.05555555555555555,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":2875.8620689667496,\"__ggsql_aes_xend__\":2958.6206896564495,\"__ggsql_aes_y__\":0.027777777777777776,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '2500' ? '2500' : datum.label == '500' ? '500' : datum.label == '1500' ? '1500' : datum.label == '1000' ? '1000' : datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[434.48275862060007,3165.5172413806995],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"x2\":{\"axis\":{\"labelExpr\":\"datum.label == '2500' ? '2500' : datum.label == '500' ? '500' : datum.label == '1500' ? '1500' : datum.label == '1000' ? '1000' : datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_xend__\",\"scale\":{\"domain\":[434.48275862060007,3165.5172413806995]},\"title\":null,\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '0.04' ? '0.04' : datum.label == '0.049999999999999996' ? '0.049999999999999996' : datum.label == '0' ? '0' : datum.label == '0.019999999999999997' ? '0.019999999999999997' : datum.label == '0.01' ? '0.01' : datum.label == '0.03' ? '0.03' : datum.label\",\"values\":[0.0,0.01,0.019999999999999997,0.03,0.04,0.05]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.002777777777777778,0.05833333333333333],\"zero\":false},\"title\":\"Density\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '0.04' ? '0.04' : datum.label == '0.049999999999999996' ? '0.049999999999999996' : datum.label == '0' ? '0' : datum.label == '0.019999999999999997' ? '0.019999999999999997' : datum.label == '0.01' ? '0.01' : datum.label == '0.03' ? '0.03' : datum.label\",\"values\":[0.0,0.01,0.019999999999999997,0.03,0.04,0.05]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.002777777777777778,0.05833333333333333]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Density Distribution\",\"width\":\"container\"};\n    const visId = 'vis-1771589200500';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Bar Width Setting\n\nControl bar width with the `width` setting (0-1 scale, default 0.9):\n\n::: {#29d1dd7a .cell execution_count=18}\n``` {.ggsql .cell-code}\nSELECT category FROM 'sales.csv'\nVISUALISE category AS x\nDRAW bar \n    SETTING width => 0.5\nLABEL\n    title => 'Sales Count (Narrow Bars)',\n    x => 'Category',\n    y => 'Count'\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<div id=\"vis-1771589200577\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":12,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":12,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":12,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"width\":{\"value\":0.5},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '5' ? '5' : datum.label == '0' ? '0' : datum.label == '10' ? '10' : datum.label\",\"values\":[0.0,5.0,10.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.6000000000000001,12.6],\"zero\":false},\"title\":\"Count\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '5' ? '5' : datum.label == '0' ? '0' : datum.label == '10' ? '10' : datum.label\",\"values\":[0.0,5.0,10.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.6000000000000001,12.6]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.5}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Sales Count (Narrow Bars)\",\"width\":\"container\"};\n    const visId = 'vis-1771589200577';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Bar Remapping\n\nBar computes `count` and `proportion` statistics. By default, `count` is mapped to `y`. Use `REMAPPING` to show proportions instead:\n\n::: {#ac33db33 .cell execution_count=19}\n``` {.ggsql .cell-code}\nSELECT category FROM 'sales.csv'\nVISUALISE category AS x\nDRAW bar \n    REMAPPING proportion AS y\nLABEL\n    title => 'Sales Proportion by Category',\n    x => 'Category',\n    y => 'Proportion'\n```\n\n::: {.cell-output .cell-output-display execution_count=19}\n```{=html}\n<div id=\"vis-1771589200655\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":0.3333333333333333,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":0.3333333333333333,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":0.3333333333333333,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '0.30000000000000004' ? '0.30000000000000004' : datum.label == '0.20000000000000004' ? '0.20000000000000004' : datum.label == '0' ? '0' : datum.label == '0.1' ? '0.1' : datum.label\",\"values\":[0.0,0.1,0.20000000000000004,0.30000000000000004]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.016666666666666666,0.35],\"zero\":false},\"title\":\"Proportion\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '0.30000000000000004' ? '0.30000000000000004' : datum.label == '0.20000000000000004' ? '0.20000000000000004' : datum.label == '0' ? '0' : datum.label == '0.1' ? '0.1' : datum.label\",\"values\":[0.0,0.1,0.20000000000000004,0.30000000000000004]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.016666666666666666,0.35]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Sales Proportion by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589200655';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\nCombine with `weight` to show weighted proportions:\n\n::: {#e235be26 .cell execution_count=20}\n``` {.ggsql .cell-code}\nSELECT category, revenue FROM 'sales.csv'\nVISUALISE category AS x, revenue AS weight\nDRAW bar \n    REMAPPING proportion AS y\nLABEL\n    title => 'Revenue Share by Category',\n    x => 'Category',\n    y => 'Share of Total Revenue'\n```\n\n::: {.cell-output .cell-output-display execution_count=20}\n```{=html}\n<div id=\"vis-1771589200734\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":0.38144329896907214,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":0.24570446735395188,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":0.3728522336769759,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Furniture' ? 'Furniture' : datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '0.30000000000000004' ? '0.30000000000000004' : datum.label == '0.4' ? '0.4' : datum.label == '0' ? '0' : datum.label == '0.1' ? '0.1' : datum.label == '0.20000000000000004' ? '0.20000000000000004' : datum.label\",\"values\":[0.0,0.1,0.20000000000000004,0.30000000000000004,0.4]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-0.01907216494845361,0.40051546391752574],\"zero\":false},\"title\":\"Share of Total Revenue\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '0.30000000000000004' ? '0.30000000000000004' : datum.label == '0.4' ? '0.4' : datum.label == '0' ? '0' : datum.label == '0.1' ? '0.1' : datum.label == '0.20000000000000004' ? '0.20000000000000004' : datum.label\",\"values\":[0.0,0.1,0.20000000000000004,0.30000000000000004,0.4]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-0.01907216494845361,0.40051546391752574]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Share by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589200734';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Multiple Layers\n\n### Line with Points\n\n::: {#d0f97f81 .cell execution_count=21}\n``` {.ggsql .cell-code}\nSELECT date, value FROM 'timeseries.csv'\nVISUALISE date AS x, value AS y\nDRAW line \n    SETTING  color => 'blue'\nDRAW point \n    SETTING size => 6, color => 'red'\nSCALE x VIA date\nLABEL \n    title => 'Time Series with Points', \n    x => 'Date', \n    y => 'Value'\n```\n\n::: {.cell-output .cell-output-display execution_count=21}\n```{=html}\n<div id=\"vis-1771589200810\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-08\",\"__ggsql_aes_y__\":110.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":105.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-22\",\"__ggsql_aes_y__\":115.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-29\",\"__ggsql_aes_y__\":120.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-05\",\"__ggsql_aes_y__\":118.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-12\",\"__ggsql_aes_y__\":125.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-19\",\"__ggsql_aes_y__\":130.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-26\",\"__ggsql_aes_y__\":128.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":135.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-12\",\"__ggsql_aes_y__\":142.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-19\",\"__ggsql_aes_y__\":138.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-26\",\"__ggsql_aes_y__\":145.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-02\",\"__ggsql_aes_y__\":150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-09\",\"__ggsql_aes_y__\":148.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-16\",\"__ggsql_aes_y__\":155.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-23\",\"__ggsql_aes_y__\":160.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-30\",\"__ggsql_aes_y__\":158.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-07\",\"__ggsql_aes_y__\":165.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-14\",\"__ggsql_aes_y__\":170.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-08\",\"__ggsql_aes_y__\":110.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":105.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-22\",\"__ggsql_aes_y__\":115.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-29\",\"__ggsql_aes_y__\":120.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-05\",\"__ggsql_aes_y__\":118.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-12\",\"__ggsql_aes_y__\":125.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-19\",\"__ggsql_aes_y__\":130.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-26\",\"__ggsql_aes_y__\":128.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":135.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-03-12\",\"__ggsql_aes_y__\":142.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-03-19\",\"__ggsql_aes_y__\":138.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-03-26\",\"__ggsql_aes_y__\":145.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-04-02\",\"__ggsql_aes_y__\":150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-04-09\",\"__ggsql_aes_y__\":148.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-04-16\",\"__ggsql_aes_y__\":155.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-04-23\",\"__ggsql_aes_y__\":160.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-04-30\",\"__ggsql_aes_y__\":158.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-05-07\",\"__ggsql_aes_y__\":165.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-05-14\",\"__ggsql_aes_y__\":170.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"stroke\":{\"value\":\"#0000ff\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-16' ? '2023-01-16' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-13' ? '2023-03-13' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-27' ? '2023-03-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-27' ? '2023-02-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-02' ? '2023-01-02' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-10' ? '2023-04-10' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-13' ? '2023-02-13' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-24' ? '2023-04-24' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-08' ? '2023-05-08' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-30' ? '2023-01-30' : datum.label\",\"values\":[\"2023-01-02\",\"2023-01-16\",\"2023-01-30\",\"2023-02-13\",\"2023-02-27\",\"2023-03-13\",\"2023-03-27\",\"2023-04-10\",\"2023-04-24\",\"2023-05-08\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-25\",\"2023-05-20\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '140' ? '140' : datum.label == '120' ? '120' : datum.label == '160' ? '160' : datum.label == '100' ? '100' : datum.label\",\"values\":[100.0,120.0,140.0,160.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[96.5,173.5],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"fill\":{\"value\":\"#ff0000\"},\"size\":{\"value\":201.06192982974673},\"stroke\":{\"value\":\"#ff0000\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-16' ? '2023-01-16' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-13' ? '2023-03-13' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-27' ? '2023-03-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-27' ? '2023-02-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-02' ? '2023-01-02' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-10' ? '2023-04-10' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-13' ? '2023-02-13' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-24' ? '2023-04-24' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-08' ? '2023-05-08' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-30' ? '2023-01-30' : datum.label\",\"values\":[\"2023-01-02\",\"2023-01-16\",\"2023-01-30\",\"2023-02-13\",\"2023-02-27\",\"2023-03-13\",\"2023-03-27\",\"2023-04-10\",\"2023-04-24\",\"2023-05-08\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-25\",\"2023-05-20\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '140' ? '140' : datum.label == '120' ? '120' : datum.label == '160' ? '160' : datum.label == '100' ? '100' : datum.label\",\"values\":[100.0,120.0,140.0,160.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[96.5,173.5],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Time Series with Points\",\"width\":\"container\"};\n    const visId = 'vis-1771589200810';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Colored Lines by Category\n\n::: {#6bd7044c .cell execution_count=22}\n``` {.ggsql .cell-code}\nSELECT date, value, category FROM 'metrics.csv'\nVISUALISE date AS x, value AS y, category AS color\nDRAW line\nSCALE x VIA date\nLABEL \n    title => 'Metrics by Category', \n    x => 'Date', \n    y => 'Value'\n```\n\n::: {.cell-output .cell-output-display execution_count=22}\n```{=html}\n<div id=\"vis-1771589200884\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":45.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":52.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":48.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":58.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":62.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":67.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":71.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":75.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":80.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":85.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":90.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":95.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":135.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":128.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":142.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":155.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":148.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":162.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":175.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":168.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":182.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":195.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":188.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":78.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":82.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":75.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":85.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":92.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":88.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":95.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":101.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":97.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":105.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":112.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":108.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Support' ? 'Support' : datum.label == 'Marketing' ? 'Marketing' : datum.label == 'Sales' ? 'Sales' : datum.label\"},\"scale\":{\"domain\":[\"Marketing\",\"Sales\",\"Support\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"category\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '150' ? '150' : datum.label == '100' ? '100' : datum.label == '200' ? '200' : datum.label == '50' ? '50' : datum.label\",\"values\":[50.0,100.0,150.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[37.705000000000005,202.595],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Metrics by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589200884';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Faceting\n\n### Facet by Region\n\n::: {#72b8a915 .cell execution_count=23}\n``` {.ggsql .cell-code}\nSELECT sale_date, revenue, region FROM 'sales.csv'\nWHERE category = 'Electronics'\nVISUALISE sale_date AS x, revenue AS y\nDRAW line\nSCALE x VIA date\nFACET region\nLABEL \n    title => 'Electronics Sales by Region', \n    x => 'Date', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=23}\n```{=html}\n<div id=\"vis-1771589200963\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"columns\":3,\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-10\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-20\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-12\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-08\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-14\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-22\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-18\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-25\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-11\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-05\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"facet\":{\"field\":\"__ggsql_aes_panel__\",\"header\":{\"labelExpr\":\"datum.value == 'East' ? 'East' : datum.value == 'South' ? 'South' : datum.value == 'North' ? 'North' : datum.value == 'West' ? 'West' : datum.value\"},\"sort\":[\"East\",\"North\",\"South\",\"West\"],\"type\":\"nominal\"},\"height\":\"container\",\"spacing\":10.0,\"spec\":{\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_panel__\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-29\",\"2023-12-21\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '2500' ? '2500' : datum.label == '1500' ? '1500' : datum.label == '2000' ? '2000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[900.0,3100.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}]},\"title\":\"Electronics Sales by Region\",\"width\":\"container\"};\n    const visId = 'vis-1771589200963';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Facet Grid\n\n::: {#4ef173d8 .cell execution_count=24}\n``` {.ggsql .cell-code}\nSELECT\n    DATE_TRUNC('month', sale_date) as month,\n    region,\n    category,\n    SUM(revenue) as total_revenue,\n    SUM(quantity) * 100 as total_quantity_scaled\nFROM 'sales.csv'\nGROUP BY DATE_TRUNC('month', sale_date), region, category\nVISUALISE month AS x\nDRAW line \n    MAPPING total_revenue AS y\n    SETTING color => 'steelblue'\nDRAW point \n    MAPPING total_revenue AS y\n    SETTING size => 6, color => 'darkblue'\nDRAW line \n    MAPPING total_quantity_scaled AS y\n    SETTING color => 'coral'\nDRAW point \n    MAPPING total_quantity_scaled AS y\n    SETTING size => 6, color => 'orangered'\nSCALE x VIA date\nFACET region BY category\nLABEL \n    title => 'Monthly Revenue and Quantity by Region and Category', \n    x => 'Month', \n    y => 'Value'\n```\n\n::: {.cell-output .cell-output-display execution_count=24}\n```{=html}\n<div id=\"vis-1771589201109\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1050.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1250.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1300.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":850.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":1750.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1450.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":950.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":1550.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":2300.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":1350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":1650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":2900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1050.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1250.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1300.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":850.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":1750.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2700.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1450.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":950.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":1550.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":2300.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":1350.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":1650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1700.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":2900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":5500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":3800.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":400.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":5000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":5800.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":4200.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":4800.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":3500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":400.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":5200.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":4500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":6000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":300.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":300.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":5500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":3800.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":400.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":5000.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":5800.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":4200.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":4800.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":3500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":400.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":5200.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":4500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Clothing\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":6000.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":500.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Electronics\",\"__ggsql_aes_row__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":300.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"},{\"__ggsql_aes_column__\":\"Furniture\",\"__ggsql_aes_row__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":300.0,\"__ggsql_source__\":\"__ggsql_layer_3__\"}]},\"facet\":{\"column\":{\"field\":\"__ggsql_aes_column__\",\"header\":{\"labelExpr\":\"datum.value == 'Furniture' ? 'Furniture' : datum.value == 'Clothing' ? 'Clothing' : datum.value == 'Electronics' ? 'Electronics' : datum.value\"},\"sort\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"type\":\"nominal\"},\"row\":{\"field\":\"__ggsql_aes_row__\",\"header\":{\"labelExpr\":\"datum.value == 'West' ? 'West' : datum.value == 'North' ? 'North' : datum.value == 'East' ? 'East' : datum.value == 'South' ? 'South' : datum.value\"},\"sort\":[\"East\",\"North\",\"South\",\"West\"],\"type\":\"nominal\"}},\"height\":\"container\",\"spacing\":10.0,\"spec\":{\"layer\":[{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_column__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_row__\",\"type\":\"nominal\"}],\"stroke\":{\"value\":\"#4682b4\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '5000' ? '5000' : datum.label == '6000' ? '6000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,2000.0,3000.0,4000.0,5000.0,6000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.0,6285.0],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_column__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_row__\",\"type\":\"nominal\"}],\"fill\":{\"value\":\"#00008b\"},\"size\":{\"value\":201.06192982974673},\"stroke\":{\"value\":\"#00008b\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '5000' ? '5000' : datum.label == '6000' ? '6000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,2000.0,3000.0,4000.0,5000.0,6000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.0,6285.0],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_row__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_column__\",\"type\":\"nominal\"}],\"stroke\":{\"value\":\"#ff7f50\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '5000' ? '5000' : datum.label == '6000' ? '6000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,2000.0,3000.0,4000.0,5000.0,6000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.0,6285.0],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_2__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_column__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_row__\",\"type\":\"nominal\"}],\"fill\":{\"value\":\"#ff4500\"},\"size\":{\"value\":201.06192982974673},\"stroke\":{\"value\":\"#ff4500\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '3000' ? '3000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '5000' ? '5000' : datum.label == '6000' ? '6000' : datum.label == '1000' ? '1000' : datum.label\",\"values\":[1000.0,2000.0,3000.0,4000.0,5000.0,6000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.0,6285.0],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_3__\",\"field\":\"__ggsql_source__\"}}]}]},\"title\":\"Monthly Revenue and Quantity by Region and Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589201109';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Coordinate Transformations\n\n### Flipped Coordinates (Horizontal Bar Chart)\n\n::: {#b2ed1808 .cell execution_count=25}\n``` {.ggsql .cell-code}\nSELECT region, SUM(revenue) as total\nFROM 'sales.csv'\nGROUP BY region\nORDER BY total DESC\nVISUALISE region AS x, total AS y, region AS fill\nDRAW bar\nCOORD flip\nLABEL \n    title => 'Total Revenue by Region', \n    x => 'Region', \n    y => 'Total Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=25}\n```{=html}\n<div id=\"vis-1771589201188\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_x__\":\"West\",\"__ggsql_aes_y__\":16650.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_x__\":\"East\",\"__ggsql_aes_y__\":15450.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_x__\":\"South\",\"__ggsql_aes_y__\":13900.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_x__\":\"North\",\"__ggsql_aes_y__\":12200.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'East' ? 'East' : datum.label == 'West' ? 'West' : datum.label == 'South' ? 'South' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '15000' ? '15000' : datum.label == '0' ? '0' : datum.label == '10000' ? '10000' : datum.label == '5000' ? '5000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-832.5,17482.5],\"zero\":false},\"title\":\"Total Revenue ($)\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == 'East' ? 'East' : datum.label == 'West' ? 'West' : datum.label == 'North' ? 'North' : datum.label == 'South' ? 'South' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"zero\":false},\"title\":\"Region\",\"type\":\"nominal\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '15000' ? '15000' : datum.label == '0' ? '0' : datum.label == '10000' ? '10000' : datum.label == '5000' ? '5000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-832.5,17482.5]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Total Revenue by Region\",\"width\":\"container\"};\n    const visId = 'vis-1771589201188';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Cartesian with Axis Limits\n\n::: {#d61101b0 .cell execution_count=26}\n``` {.ggsql .cell-code}\nSELECT x, y FROM 'data.csv'\nVISUALISE x, y\nDRAW point \n    SETTING size => 4, color => 'blue'\nCOORD cartesian \n    SETTING xlim => [0, 60], ylim => [0, 70]\nLABEL \n    title => 'Scatter Plot with Custom Axis Limits', \n    x => 'X', \n    y => 'Y'\n```\n\n::: {.cell-output .cell-output-display execution_count=26}\n```{=html}\n<div id=\"vis-1771589201242\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":5.2,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":8.7,\"__ggsql_aes_y__\":22.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":12.3,\"__ggsql_aes_y__\":28.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":15.8,\"__ggsql_aes_y__\":35.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":19.4,\"__ggsql_aes_y__\":42.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":23.1,\"__ggsql_aes_y__\":38.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":26.8,\"__ggsql_aes_y__\":45.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":30.2,\"__ggsql_aes_y__\":52.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":33.9,\"__ggsql_aes_y__\":48.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":37.5,\"__ggsql_aes_y__\":55.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":41.2,\"__ggsql_aes_y__\":62.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":44.8,\"__ggsql_aes_y__\":58.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":48.3,\"__ggsql_aes_y__\":65.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":52.1,\"__ggsql_aes_y__\":71.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":55.7,\"__ggsql_aes_y__\":68.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":59.4,\"__ggsql_aes_y__\":74.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"fill\":{\"value\":\"#0000ff\"},\"size\":{\"value\":89.36085770210966},\"stroke\":{\"value\":\"#0000ff\"},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '40' ? '40' : datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label == '30' ? '30' : datum.label == '10' ? '10' : datum.label == '20' ? '20' : datum.label\",\"values\":[10.0,20.0,30.0,40.0,50.0,60.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[0.0,60.0]},\"title\":\"X\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '30' ? '30' : datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label == '70' ? '70' : datum.label == '20' ? '20' : datum.label == '40' ? '40' : datum.label\",\"values\":[20.0,30.0,40.0,50.0,60.0,70.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[0.0,70.0]},\"title\":\"Y\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Scatter Plot with Custom Axis Limits\",\"width\":\"container\"};\n    const visId = 'vis-1771589201242';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Pie Chart with Polar Coordinates\n\n::: {#9ebf05d9 .cell execution_count=27}\n``` {.ggsql .cell-code}\nSELECT category, SUM(revenue) as total\nFROM 'sales.csv'\nGROUP BY category\nVISUALISE total AS y, category AS fill\nDRAW bar\nCOORD polar\nLABEL \n    title => 'Revenue Distribution by Category'\n```\n\n::: {.cell-output .cell-output-display execution_count=27}\n```{=html}\n<div id=\"vis-1771589201316\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":\"Furniture\",\"__ggsql_aes_y__\":14300.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Clothing\",\"__ggsql_aes_y__\":21700.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Electronics\",\"__ggsql_aes_y__\":22200.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"category\",\"type\":\"nominal\"},\"theta\":{\"axis\":{\"labelExpr\":\"datum.label == '15000' ? '15000' : datum.label == '0' ? '0' : datum.label == '5000' ? '5000' : datum.label == '20000' ? '20000' : datum.label == '10000' ? '10000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0,20000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-1110.0,23310.0],\"zero\":false},\"title\":\"total\",\"type\":\"quantitative\"},\"width\":{\"value\":0.9},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '15000' ? '15000' : datum.label == '0' ? '0' : datum.label == '5000' ? '5000' : datum.label == '20000' ? '20000' : datum.label == '10000' ? '10000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0,20000.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-1110.0,23310.0]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"arc\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue Distribution by Category\",\"width\":\"container\"};\n    const visId = 'vis-1771589201316';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Constant Mappings\n\nConstants can be used in both the VISUALISE clause (global) and MAPPING clauses (per-layer) to set fixed aesthetic values.\n\n### Different Constants Per Layer\n\nEach layer can have its own constant value, creating a legend showing all values:\n\n::: {#fdbd18a1 .cell execution_count=28}\n``` {.ggsql .cell-code}\nWITH monthly AS (\n    SELECT\n        DATE_TRUNC('month', sale_date) as month,\n        category,\n        SUM(revenue) as revenue\n    FROM 'sales.csv'\n    GROUP BY DATE_TRUNC('month', sale_date), category\n)\nVISUALISE month AS x, revenue AS y\nDRAW line \n    MAPPING 'Electronics' AS color FROM monthly \n    FILTER category = 'Electronics'\nDRAW line \n    MAPPING 'Clothing' AS color FROM monthly \n    FILTER category = 'Clothing'\nDRAW line \n    MAPPING 'Furniture' AS color FROM monthly \n    FILTER category = 'Furniture'\nSCALE x VIA date\nLABEL \n    title => 'Revenue by Category (Constant Colors)', \n    x => 'Month', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=28}\n```{=html}\n<div id=\"vis-1771589201437\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2700.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1700.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":2300.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1300.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":2900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1250.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":950.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1050.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":1750.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1450.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":1650.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":1350.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":850.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1150.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Furniture\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":1550.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '500' ? '500' : datum.label == '1000' ? '1000' : datum.label == '1500' ? '1500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '500' ? '500' : datum.label == '1000' ? '1000' : datum.label == '1500' ? '1500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Clothing' ? 'Clothing' : datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Furniture' ? 'Furniture' : datum.label\"},\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '500' ? '500' : datum.label == '1000' ? '1000' : datum.label == '1500' ? '1500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_2__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue by Category (Constant Colors)\",\"width\":\"container\"};\n    const visId = 'vis-1771589201437';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Mixed Constants and Columns\n\nWhen mixing constant and column mappings for the same aesthetic, the axis/legend label uses the first non-constant column name:\n\n::: {#7babd600 .cell execution_count=29}\n``` {.ggsql .cell-code}\nSELECT date, value, category FROM 'metrics.csv'\nVISUALISE date AS x\nDRAW line \n    MAPPING value AS y, category AS color\nDRAW point \n    MAPPING 120 AS y \n    SETTING size => 3, color => 'blue'\nSCALE x VIA date\nLABEL \n    title => 'Metrics with Threshold Line', \n    x => 'Date'\n```\n\n::: {.cell-output .cell-output-display execution_count=29}\n```{=html}\n<div id=\"vis-1771589201530\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":45.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":52.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":48.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":58.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":62.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":67.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":71.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":75.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":80.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":85.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":90.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":95.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":135.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":128.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":142.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":155.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":148.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":162.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":175.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":168.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":182.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":195.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":188.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":78.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":82.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":75.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":85.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":92.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":88.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":95.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":101.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":97.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":105.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":112.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Support\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":108.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":null,\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":120,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Marketing' ? 'Marketing' : datum.label == 'Support' ? 'Support' : datum.label == 'Sales' ? 'Sales' : datum.label\"},\"scale\":{\"domain\":[\"Marketing\",\"Sales\",\"Support\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"category\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '50' ? '50' : datum.label == '100' ? '100' : datum.label == '150' ? '150' : datum.label == '200' ? '200' : datum.label\",\"values\":[50.0,100.0,150.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[37.705000000000005,202.595],\"zero\":false},\"title\":\"value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"fill\":{\"value\":\"#0000ff\"},\"size\":{\"value\":50.26548245743668},\"stroke\":{\"value\":\"#0000ff\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '50' ? '50' : datum.label == '100' ? '100' : datum.label == '150' ? '150' : datum.label == '200' ? '200' : datum.label\",\"values\":[50.0,100.0,150.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[37.705000000000005,202.595],\"zero\":false},\"title\":\"value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Metrics with Threshold Line\",\"width\":\"container\"};\n    const visId = 'vis-1771589201530';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Numeric Constants\n\nNumbers work as constants too:\n\n::: {#79bb020f .cell execution_count=30}\n``` {.ggsql .cell-code}\nSELECT x, y FROM 'data.csv'\nVISUALISE x, y\nDRAW point \n    SETTING color => 'blue', size => 10\nDRAW point \n    SETTING color => 'red', size => 5 \n    FILTER y > 50\nLABEL \n    title => 'Scatter Plot with Constant Sizes'\n```\n\n::: {.cell-output .cell-output-display execution_count=30}\n```{=html}\n<div id=\"vis-1771589201597\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":5.2,\"__ggsql_aes_y__\":18.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":8.7,\"__ggsql_aes_y__\":22.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":12.3,\"__ggsql_aes_y__\":28.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":15.8,\"__ggsql_aes_y__\":35.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":19.4,\"__ggsql_aes_y__\":42.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":23.1,\"__ggsql_aes_y__\":38.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":26.8,\"__ggsql_aes_y__\":45.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":30.2,\"__ggsql_aes_y__\":52.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":33.9,\"__ggsql_aes_y__\":48.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":37.5,\"__ggsql_aes_y__\":55.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":41.2,\"__ggsql_aes_y__\":62.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":44.8,\"__ggsql_aes_y__\":58.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":48.3,\"__ggsql_aes_y__\":65.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":52.1,\"__ggsql_aes_y__\":71.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":55.7,\"__ggsql_aes_y__\":68.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":59.4,\"__ggsql_aes_y__\":74.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":30.2,\"__ggsql_aes_y__\":52.8,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":37.5,\"__ggsql_aes_y__\":55.9,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":41.2,\"__ggsql_aes_y__\":62.4,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":44.8,\"__ggsql_aes_y__\":58.7,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":48.3,\"__ggsql_aes_y__\":65.2,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":52.1,\"__ggsql_aes_y__\":71.8,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":55.7,\"__ggsql_aes_y__\":68.1,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":59.4,\"__ggsql_aes_y__\":74.6,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"fill\":{\"value\":\"#0000ff\"},\"size\":{\"value\":558.5053606381854},\"stroke\":{\"value\":\"#0000ff\"},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '40' ? '40' : datum.label == '20' ? '20' : datum.label == '50' ? '50' : datum.label == '30' ? '30' : datum.label == '10' ? '10' : datum.label == '60' ? '60' : datum.label\",\"values\":[10.0,20.0,30.0,40.0,50.0,60.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[2.49,62.11],\"zero\":false},\"title\":\"x\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '20' ? '20' : datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label == '40' ? '40' : datum.label == '30' ? '30' : datum.label == '70' ? '70' : datum.label\",\"values\":[20.0,30.0,40.0,50.0,60.0,70.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.695,77.405],\"zero\":false},\"title\":\"y\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"fill\":{\"value\":\"#ff0000\"},\"size\":{\"value\":139.62634015954634},\"stroke\":{\"value\":\"#ff0000\"},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '40' ? '40' : datum.label == '20' ? '20' : datum.label == '50' ? '50' : datum.label == '30' ? '30' : datum.label == '10' ? '10' : datum.label == '60' ? '60' : datum.label\",\"values\":[10.0,20.0,30.0,40.0,50.0,60.0]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[2.49,62.11],\"zero\":false},\"title\":\"x\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '20' ? '20' : datum.label == '50' ? '50' : datum.label == '60' ? '60' : datum.label == '40' ? '40' : datum.label == '30' ? '30' : datum.label == '70' ? '70' : datum.label\",\"values\":[20.0,30.0,40.0,50.0,60.0,70.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[15.695,77.405],\"zero\":false},\"title\":\"y\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Scatter Plot with Constant Sizes\",\"width\":\"container\"};\n    const visId = 'vis-1771589201597';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Layer filtering\n\n### Filter one layer\n\n::: {#2045bb2b .cell execution_count=31}\n``` {.ggsql .cell-code}\nSELECT date, value FROM 'timeseries.csv'\nVISUALISE date AS x, value AS y\nDRAW line \n    SETTING color => 'blue'\nDRAW point \n    SETTING color => 'red', size => 6\n    FILTER value < 130\nSCALE x VIA date\nLABEL \n    title => 'Time Series with Points', \n    x => 'Date', \n    y => 'Value'\n```\n\n::: {.cell-output .cell-output-display execution_count=31}\n```{=html}\n<div id=\"vis-1771589201676\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-08\",\"__ggsql_aes_y__\":110.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":105.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-22\",\"__ggsql_aes_y__\":115.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-29\",\"__ggsql_aes_y__\":120.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-05\",\"__ggsql_aes_y__\":118.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-12\",\"__ggsql_aes_y__\":125.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-19\",\"__ggsql_aes_y__\":130.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-26\",\"__ggsql_aes_y__\":128.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":135.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-12\",\"__ggsql_aes_y__\":142.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-19\",\"__ggsql_aes_y__\":138.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-26\",\"__ggsql_aes_y__\":145.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-02\",\"__ggsql_aes_y__\":150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-09\",\"__ggsql_aes_y__\":148.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-16\",\"__ggsql_aes_y__\":155.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-23\",\"__ggsql_aes_y__\":160.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-30\",\"__ggsql_aes_y__\":158.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-07\",\"__ggsql_aes_y__\":165.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-14\",\"__ggsql_aes_y__\":170.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-08\",\"__ggsql_aes_y__\":110.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":105.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-22\",\"__ggsql_aes_y__\":115.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-29\",\"__ggsql_aes_y__\":120.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-05\",\"__ggsql_aes_y__\":118.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-12\",\"__ggsql_aes_y__\":125.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-26\",\"__ggsql_aes_y__\":128.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"stroke\":{\"value\":\"#0000ff\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-02' ? '2023-01-02' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-27' ? '2023-03-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-24' ? '2023-04-24' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-30' ? '2023-01-30' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-13' ? '2023-02-13' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-10' ? '2023-04-10' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-16' ? '2023-01-16' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-27' ? '2023-02-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-08' ? '2023-05-08' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-13' ? '2023-03-13' : datum.label\",\"values\":[\"2023-01-02\",\"2023-01-16\",\"2023-01-30\",\"2023-02-13\",\"2023-02-27\",\"2023-03-13\",\"2023-03-27\",\"2023-04-10\",\"2023-04-24\",\"2023-05-08\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-25\",\"2023-05-20\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '140' ? '140' : datum.label == '160' ? '160' : datum.label == '100' ? '100' : datum.label == '120' ? '120' : datum.label\",\"values\":[100.0,120.0,140.0,160.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[96.5,173.5],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"fill\":{\"value\":\"#ff0000\"},\"size\":{\"value\":201.06192982974673},\"stroke\":{\"value\":\"#ff0000\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-01-02' ? '2023-01-02' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-27' ? '2023-03-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-24' ? '2023-04-24' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-30' ? '2023-01-30' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-13' ? '2023-02-13' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-10' ? '2023-04-10' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-16' ? '2023-01-16' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-27' ? '2023-02-27' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-08' ? '2023-05-08' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-13' ? '2023-03-13' : datum.label\",\"values\":[\"2023-01-02\",\"2023-01-16\",\"2023-01-30\",\"2023-02-13\",\"2023-02-27\",\"2023-03-13\",\"2023-03-27\",\"2023-04-10\",\"2023-04-24\",\"2023-05-08\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-25\",\"2023-05-20\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '140' ? '140' : datum.label == '160' ? '160' : datum.label == '100' ? '100' : datum.label == '120' ? '120' : datum.label\",\"values\":[100.0,120.0,140.0,160.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[96.5,173.5],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Time Series with Points\",\"width\":\"container\"};\n    const visId = 'vis-1771589201676';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Layer ordering\n\n### ORDER BY in a layer\n\nUse `ORDER BY` to ensure data is sorted correctly within a layer. This is especially important for line charts where the order of points affects the visual path:\n\n::: {#96352c0a .cell execution_count=32}\n``` {.ggsql .cell-code}\nWITH unordered_data AS (\n    SELECT * FROM (VALUES\n        (150.0, '2023-03-01'::DATE),\n        (100.0, '2023-01-01'::DATE),\n        (120.0, '2023-05-01'::DATE),\n        (200.0, '2023-02-01'::DATE),\n        (180.0, '2023-04-01'::DATE)\n    ) AS t(value, date)\n)\nVISUALISE\nDRAW path \n    MAPPING date AS x, value AS y FROM unordered_data \n    ORDER BY date\nDRAW point \n    MAPPING date AS x, value AS y FROM unordered_data \n    SETTING size => 6, color => 'red'\nSCALE x VIA date\nLABEL \n    title => 'Line Chart with ORDER BY', \n    x => 'Date', \n    y => 'Value'\n```\n\n::: {.cell-output .cell-output-display execution_count=32}\n```{=html}\n<div id=\"vis-1771589201738\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":180.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":120.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":120.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":180.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"order\":{\"value\":null},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-20' ? '2023-02-20' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-20' ? '2023-03-20' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-06' ? '2023-03-06' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-23' ? '2023-01-23' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-03' ? '2023-04-03' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-06' ? '2023-02-06' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-09' ? '2023-01-09' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-17' ? '2023-04-17' : timeFormat(datum.value, '%Y-%m-%d') == '2022-12-26' ? '2022-12-26' : datum.label\",\"values\":[\"2022-12-26\",\"2023-01-09\",\"2023-01-23\",\"2023-02-06\",\"2023-02-20\",\"2023-03-06\",\"2023-03-20\",\"2023-04-03\",\"2023-04-17\",\"2023-05-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-26\",\"2023-05-07\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '100' ? '100' : datum.label == '125' ? '125' : datum.label == '150' ? '150' : datum.label == '200' ? '200' : datum.label == '175' ? '175' : datum.label\",\"values\":[100.0,125.0,150.0,175.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[95.0,205.0],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"fill\":{\"value\":\"#ff0000\"},\"size\":{\"value\":201.06192982974673},\"stroke\":{\"value\":\"#ff0000\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-20' ? '2023-02-20' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-20' ? '2023-03-20' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-06' ? '2023-03-06' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-23' ? '2023-01-23' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-03' ? '2023-04-03' : timeFormat(datum.value, '%Y-%m-%d') == '2023-02-06' ? '2023-02-06' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-09' ? '2023-01-09' : timeFormat(datum.value, '%Y-%m-%d') == '2023-04-17' ? '2023-04-17' : timeFormat(datum.value, '%Y-%m-%d') == '2022-12-26' ? '2022-12-26' : datum.label\",\"values\":[\"2022-12-26\",\"2023-01-09\",\"2023-01-23\",\"2023-02-06\",\"2023-02-20\",\"2023-03-06\",\"2023-03-20\",\"2023-04-03\",\"2023-04-17\",\"2023-05-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-26\",\"2023-05-07\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '100' ? '100' : datum.label == '125' ? '125' : datum.label == '150' ? '150' : datum.label == '200' ? '200' : datum.label == '175' ? '175' : datum.label\",\"values\":[100.0,125.0,150.0,175.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[95.0,205.0],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Line Chart with ORDER BY\",\"width\":\"container\"};\n    const visId = 'vis-1771589201738';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Combining FILTER and ORDER BY\n\nThe `ORDER BY` clause can be combined with `FILTER` and other layer options:\n\n::: {#8a48523a .cell execution_count=33}\n``` {.ggsql .cell-code}\nSELECT date, value, category FROM 'metrics.csv'\nVISUALISE\nDRAW path \n    MAPPING date AS x, value AS y, category AS color \n    FILTER category != 'Support' \n    ORDER BY value\nDRAW point \n    MAPPING date AS x, value AS y, category AS color \n    SETTING size => 3\n    FILTER category != 'Support' \nSCALE x VIA date\nLABEL \n    title => 'Sales and Marketing Metrics (Ordered)', \n    x => 'Date', \n    y => 'Value'\n```\n\n::: {.cell-output .cell-output-display execution_count=33}\n```{=html}\n<div id=\"vis-1771589201837\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":45.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":48.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":52.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":58.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":62.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":67.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":71.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":75.6,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":80.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":85.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":90.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":95.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":128.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":135.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":142.3,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":148.2,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":155.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":162.8,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":168.9,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":175.4,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":182.5,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":188.7,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":195.1,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":45.2,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":52.1,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":48.7,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":58.3,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":62.5,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":67.8,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":71.2,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":75.6,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":80.1,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":85.4,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":90.2,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Sales\",\"__ggsql_aes_stroke__\":\"Sales\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":95.8,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":120.5,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":135.2,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":128.9,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":142.3,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":155.7,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":148.2,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":162.8,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":175.4,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":168.9,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":182.5,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":195.1,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Marketing\",\"__ggsql_aes_stroke__\":\"Marketing\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":188.7,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"},\"order\":{\"value\":null},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Sales' ? 'Sales' : datum.label == 'Marketing' ? 'Marketing' : datum.label\"},\"scale\":{\"domain\":[\"Marketing\",\"Sales\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"category\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '100' ? '100' : datum.label == '50' ? '50' : datum.label == '200' ? '200' : datum.label == '150' ? '150' : datum.label\",\"values\":[50.0,100.0,150.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[37.705000000000005,202.595],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"}],\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'Sales' ? 'Sales' : datum.label == 'Marketing' ? 'Marketing' : datum.label\"},\"scale\":{\"domain\":[\"Marketing\",\"Sales\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"category\",\"type\":\"nominal\"},\"size\":{\"value\":50.26548245743668},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Sales' ? 'Sales' : datum.label == 'Marketing' ? 'Marketing' : datum.label\"},\"scale\":{\"domain\":[\"Marketing\",\"Sales\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"category\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '100' ? '100' : datum.label == '50' ? '50' : datum.label == '200' ? '200' : datum.label == '150' ? '150' : datum.label\",\"values\":[50.0,100.0,150.0,200.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[37.705000000000005,202.595],\"zero\":false},\"title\":\"Value\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Sales and Marketing Metrics (Ordered)\",\"width\":\"container\"};\n    const visId = 'vis-1771589201837';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Common Table Expressions (CTEs)\n\n### Simple CTE with VISUALISE FROM\n\n::: {#d1d20794 .cell execution_count=34}\n``` {.ggsql .cell-code}\nWITH monthly_sales AS (\n    SELECT\n        DATE_TRUNC('month', sale_date) as month,\n        SUM(revenue) as total_revenue\n    FROM 'sales.csv'\n    GROUP BY DATE_TRUNC('month', sale_date)\n)\nVISUALISE month AS x, total_revenue AS y FROM monthly_sales\nDRAW line\nDRAW point\nSCALE x VIA date\nLABEL \n    title => 'Monthly Revenue Trends', \n    x => 'Month', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=34}\n```{=html}\n<div id=\"vis-1771589201976\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":6450.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":4150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":6950.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":7650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":2800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":4650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":5150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":6450.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":4150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":6950.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":7650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":2800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":4650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":5150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '4000' ? '4000' : datum.label == '3000' ? '3000' : datum.label == '5000' ? '5000' : datum.label == '7000' ? '7000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[3000.0,4000.0,5000.0,6000.0,7000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[2137.5,7912.5],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '4000' ? '4000' : datum.label == '3000' ? '3000' : datum.label == '5000' ? '5000' : datum.label == '7000' ? '7000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[3000.0,4000.0,5000.0,6000.0,7000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[2137.5,7912.5],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Monthly Revenue Trends\",\"width\":\"container\"};\n    const visId = 'vis-1771589201976';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Multiple CTEs\n\n::: {#8322cb49 .cell execution_count=35}\n``` {.ggsql .cell-code}\nWITH daily_sales AS (\n    SELECT sale_date, region, SUM(revenue) as revenue\n    FROM 'sales.csv'\n    GROUP BY sale_date, region\n),\nregional_totals AS (\n    SELECT region, SUM(revenue) as total\n    FROM daily_sales\n    GROUP BY region\n)\nVISUALISE region AS x, total AS y, region AS fill FROM regional_totals\nDRAW bar\nCOORD flip\nLABEL \n    title => 'Total Revenue by Region', \n    x => 'Region', \n    y => 'Total Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=35}\n```{=html}\n<div id=\"vis-1771589202118\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_x__\":\"North\",\"__ggsql_aes_y__\":12200.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_x__\":\"East\",\"__ggsql_aes_y__\":15450.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_x__\":\"West\",\"__ggsql_aes_y__\":16650.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_x__\":\"South\",\"__ggsql_aes_y__\":13900.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'West' ? 'West' : datum.label == 'North' ? 'North' : datum.label == 'South' ? 'South' : datum.label == 'East' ? 'East' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == '15000' ? '15000' : datum.label == '10000' ? '10000' : datum.label == '0' ? '0' : datum.label == '5000' ? '5000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-832.5,17482.5],\"zero\":false},\"title\":\"Total Revenue ($)\",\"type\":\"quantitative\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'West' ? 'West' : datum.label == 'South' ? 'South' : datum.label == 'East' ? 'East' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"zero\":false},\"title\":\"Region\",\"type\":\"nominal\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '15000' ? '15000' : datum.label == '10000' ? '10000' : datum.label == '0' ? '0' : datum.label == '5000' ? '5000' : datum.label\",\"values\":[0.0,5000.0,10000.0,15000.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-832.5,17482.5]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Total Revenue by Region\",\"width\":\"container\"};\n    const visId = 'vis-1771589202118';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Layer-Specific Data Sources (MAPPING FROM)\n\nLayers can pull data from different sources using `MAPPING FROM`. This enables overlaying data from different CTEs or tables.\n\n### Comparing Actuals vs Targets\n\nEach layer can reference a different CTE using `MAPPING ... FROM cte_name`:\n\n::: {#b9e15886 .cell execution_count=36}\n``` {.ggsql .cell-code}\nWITH actuals AS (\n    SELECT\n        DATE_TRUNC('month', sale_date) as month,\n        SUM(revenue) as value\n    FROM 'sales.csv'\n    GROUP BY DATE_TRUNC('month', sale_date)\n),\ntargets AS (\n    SELECT * FROM (VALUES\n        ('2023-01-01'::DATE, 5000.0),\n        ('2023-02-01'::DATE, 5500.0),\n        ('2023-03-01'::DATE, 6000.0),\n        ('2023-04-01'::DATE, 6500.0),\n        ('2023-05-01'::DATE, 7000.0),\n        ('2023-06-01'::DATE, 7500.0),\n        ('2023-07-01'::DATE, 8000.0),\n        ('2023-08-01'::DATE, 8500.0),\n        ('2023-09-01'::DATE, 9000.0),\n        ('2023-10-01'::DATE, 9500.0),\n        ('2023-11-01'::DATE, 10000.0),\n        ('2023-12-01'::DATE, 10500.0)\n    ) AS t(month, value)\n)\nVISUALISE\nDRAW line \n    MAPPING month AS x, value AS y, 'Actual' AS color FROM actuals\nDRAW point \n    MAPPING month AS x, value AS y, 'Actual' AS color FROM actuals \n    SETTING size => 6\nDRAW line \n    MAPPING month AS x, value AS y, 'Target' AS color FROM targets\nSCALE x VIA date\nLABEL \n    title => 'Revenue: Actual vs Target', \n    x => 'Month', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=36}\n```{=html}\n<div id=\"vis-1771589202248\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":4650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":6450.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":4150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":6950.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":7650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":2800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":5150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":4650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":6450.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":3350.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":5650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":4150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":6950.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":7650.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":2800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"Actual\",\"__ggsql_aes_stroke__\":\"Actual\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":5150.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":5000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":5500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":6000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":6500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":7000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":7500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":8000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":8500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":9000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":9500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":10000.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"Target\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":10500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Target' ? 'Target' : datum.label == 'Actual' ? 'Actual' : datum.label\"},\"scale\":{\"domain\":[\"Actual\",\"Target\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '8000' ? '8000' : datum.label == '10000' ? '10000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[2000.0,4000.0,6000.0,8000.0,10000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[1995.0,10905.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'Actual' ? 'Actual' : datum.label\"},\"scale\":{\"domain\":[\"Actual\"],\"range\":[\"#0067A5\"]},\"title\":\"fill\",\"type\":\"nominal\"},\"size\":{\"value\":201.06192982974673},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Target' ? 'Target' : datum.label == 'Actual' ? 'Actual' : datum.label\"},\"scale\":{\"domain\":[\"Actual\",\"Target\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '8000' ? '8000' : datum.label == '10000' ? '10000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[2000.0,4000.0,6000.0,8000.0,10000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[1995.0,10905.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Target' ? 'Target' : datum.label == 'Actual' ? 'Actual' : datum.label\"},\"scale\":{\"domain\":[\"Actual\",\"Target\"],\"range\":[\"#0067A5\",\"#F3C300\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '8000' ? '8000' : datum.label == '10000' ? '10000' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[2000.0,4000.0,6000.0,8000.0,10000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[1995.0,10905.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_2__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue: Actual vs Target\",\"width\":\"container\"};\n    const visId = 'vis-1771589202248';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### CTE Chain: Raw  Filtered  Aggregated\n\nCTEs can reference other CTEs, creating a data transformation pipeline:\n\n::: {#dc5c62ab .cell execution_count=37}\n``` {.ggsql .cell-code}\nWITH raw_data AS (\n    SELECT sale_date, revenue, category, region\n    FROM 'sales.csv'\n),\nelectronics_only AS (\n    SELECT * FROM raw_data\n    WHERE category = 'Electronics'\n),\nmonthly_electronics AS (\n    SELECT\n        DATE_TRUNC('month', sale_date) as month,\n        region,\n        SUM(revenue) as total\n    FROM electronics_only\n    GROUP BY DATE_TRUNC('month', sale_date), region\n)\nVISUALISE month AS x, total AS y, region AS color FROM monthly_electronics\nDRAW line\nDRAW point\nSCALE x VIA date\nLABEL \n    title => 'Electronics Revenue by Region (CTE Chain)', \n    x => 'Month', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=37}\n```{=html}\n<div id=\"vis-1771589202434\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'South' ? 'South' : datum.label == 'West' ? 'West' : datum.label == 'East' ? 'East' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '1500' ? '1500' : datum.label == '3000' ? '3000' : datum.label\",\"values\":[1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[900.0,3100.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"}],\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'East' ? 'East' : datum.label == 'North' ? 'North' : datum.label == 'West' ? 'West' : datum.label == 'South' ? 'South' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'South' ? 'South' : datum.label == 'West' ? 'West' : datum.label == 'East' ? 'East' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1000' ? '1000' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '1500' ? '1500' : datum.label == '3000' ? '3000' : datum.label\",\"values\":[1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[900.0,3100.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Electronics Revenue by Region (CTE Chain)\",\"width\":\"container\"};\n    const visId = 'vis-1771589202434';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Layer FROM with FILTER\n\nCombine `FROM` with `FILTER` to get filtered subsets from a CTE:\n\n::: {#9eeec490 .cell execution_count=38}\n``` {.ggsql .cell-code}\nWITH all_sales AS (\n    SELECT\n        DATE_TRUNC('month', sale_date) as month,\n        category,\n        SUM(revenue) as revenue\n    FROM 'sales.csv'\n    GROUP BY DATE_TRUNC('month', sale_date), category\n)\nVISUALISE\nDRAW line \n    MAPPING month AS x, revenue AS y, 'All Categories' AS color FROM all_sales\nDRAW line \n    MAPPING month AS x, revenue AS y, 'Electronics' AS color FROM all_sales \n    FILTER category = 'Electronics'\nDRAW line \n    MAPPING month AS x, revenue AS y, 'Clothing' AS color FROM all_sales \n    FILTER category = 'Clothing'\nSCALE x VIA date\nLABEL \n    title => 'Revenue by Category (Filtered Layers)', \n    x => 'Month', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=38}\n```{=html}\n<div id=\"vis-1771589202555\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1150.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":850.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1450.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":2300.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":1650.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":1350.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":950.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1050.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":1750.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1700.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1250.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":1550.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1300.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":2900.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"All Categories\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2100.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":1200.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1800.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1400.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":3000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":2000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":1000.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Electronics\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2600.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-01-01\",\"__ggsql_aes_y__\":800.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-11-01\",\"__ggsql_aes_y__\":2700.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-02-01\",\"__ggsql_aes_y__\":900.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-03-01\",\"__ggsql_aes_y__\":1100.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-09-01\",\"__ggsql_aes_y__\":2300.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-06-01\",\"__ggsql_aes_y__\":1700.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-10-01\",\"__ggsql_aes_y__\":2500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-07-01\",\"__ggsql_aes_y__\":1900.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-04-01\",\"__ggsql_aes_y__\":1300.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-05-01\",\"__ggsql_aes_y__\":1500.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-12-01\",\"__ggsql_aes_y__\":2900.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"},{\"__ggsql_aes_stroke__\":\"Clothing\",\"__ggsql_aes_x__\":\"2023-08-01\",\"__ggsql_aes_y__\":2100.0,\"__ggsql_source__\":\"__ggsql_layer_2__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Electronics' ? 'Electronics' : datum.label == 'All Categories' ? 'All Categories' : datum.label == 'Clothing' ? 'Clothing' : datum.label\"},\"scale\":{\"domain\":[\"All Categories\",\"Clothing\",\"Electronics\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1000' ? '1000' : datum.label == '1500' ? '1500' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '500' ? '500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Electronics' ? 'Electronics' : datum.label == 'All Categories' ? 'All Categories' : datum.label == 'Clothing' ? 'Clothing' : datum.label\"},\"scale\":{\"domain\":[\"All Categories\",\"Clothing\",\"Electronics\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1000' ? '1000' : datum.label == '1500' ? '1500' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '500' ? '500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'Electronics' ? 'Electronics' : datum.label == 'All Categories' ? 'All Categories' : datum.label == 'Clothing' ? 'Clothing' : datum.label\"},\"scale\":{\"domain\":[\"All Categories\",\"Clothing\",\"Electronics\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\"]},\"title\":\"stroke\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-15\",\"2023-12-17\"],\"zero\":false},\"title\":\"Month\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '1000' ? '1000' : datum.label == '1500' ? '1500' : datum.label == '2000' ? '2000' : datum.label == '2500' ? '2500' : datum.label == '3000' ? '3000' : datum.label == '500' ? '500' : datum.label\",\"values\":[500.0,1000.0,1500.0,2000.0,2500.0,3000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[480.0,3120.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_2__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue by Category (Filtered Layers)\",\"width\":\"container\"};\n    const visId = 'vis-1771589202555';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n## Advanced Examples\n\n### Complete Regional Sales Analysis\n\n::: {#1c1e23b5 .cell execution_count=39}\n``` {.ggsql .cell-code}\nSELECT\n    sale_date,\n    region,\n    SUM(quantity) as total_quantity\nFROM 'sales.csv'\nWHERE sale_date >= '2023-01-01'\nGROUP BY sale_date, region\nORDER BY sale_date\nVISUALISE sale_date AS x, total_quantity AS y, region AS color\nDRAW line\nDRAW point\nSCALE x VIA date\nFACET region\nLABEL\n    title => 'Sales Trends by Region', \n    x => 'Date', \n    y => 'Total Quantity'\n```\n\n::: {.cell-output .cell-output-display execution_count=39}\n```{=html}\n<div id=\"vis-1771589202658\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"columns\":3,\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-20\",\"__ggsql_aes_y__\":25.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-25\",\"__ggsql_aes_y__\":3.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-10\",\"__ggsql_aes_y__\":8.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-15\",\"__ggsql_aes_y__\":30.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-18\",\"__ggsql_aes_y__\":3.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":7.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-10\",\"__ggsql_aes_y__\":35.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-15\",\"__ggsql_aes_y__\":4.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-20\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-25\",\"__ggsql_aes_y__\":38.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-28\",\"__ggsql_aes_y__\":4.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-12\",\"__ggsql_aes_y__\":9.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-18\",\"__ggsql_aes_y__\":42.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-22\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-08\",\"__ggsql_aes_y__\":10.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-12\",\"__ggsql_aes_y__\":45.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-16\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-14\",\"__ggsql_aes_y__\":11.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-20\",\"__ggsql_aes_y__\":48.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-24\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-22\",\"__ggsql_aes_y__\":12.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-28\",\"__ggsql_aes_y__\":50.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-30\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-18\",\"__ggsql_aes_y__\":8.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-22\",\"__ggsql_aes_y__\":52.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-26\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-25\",\"__ggsql_aes_y__\":14.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-30\",\"__ggsql_aes_y__\":55.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-31\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-11\",\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-15\",\"__ggsql_aes_y__\":58.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-20\",\"__ggsql_aes_y__\":7.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-05\",\"__ggsql_aes_y__\":16.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-10\",\"__ggsql_aes_y__\":60.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":null,\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-15\",\"__ggsql_aes_y__\":7.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-15\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-20\",\"__ggsql_aes_y__\":25.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-01-25\",\"__ggsql_aes_y__\":3.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-10\",\"__ggsql_aes_y__\":8.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-15\",\"__ggsql_aes_y__\":30.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-02-18\",\"__ggsql_aes_y__\":3.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-05\",\"__ggsql_aes_y__\":7.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-10\",\"__ggsql_aes_y__\":35.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-03-15\",\"__ggsql_aes_y__\":4.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-20\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-25\",\"__ggsql_aes_y__\":38.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-04-28\",\"__ggsql_aes_y__\":4.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-12\",\"__ggsql_aes_y__\":9.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-18\",\"__ggsql_aes_y__\":42.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-05-22\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-08\",\"__ggsql_aes_y__\":10.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-12\",\"__ggsql_aes_y__\":45.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-06-16\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-14\",\"__ggsql_aes_y__\":11.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-20\",\"__ggsql_aes_y__\":48.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-07-24\",\"__ggsql_aes_y__\":5.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-22\",\"__ggsql_aes_y__\":12.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-28\",\"__ggsql_aes_y__\":50.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-08-30\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-18\",\"__ggsql_aes_y__\":8.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-22\",\"__ggsql_aes_y__\":52.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_panel__\":\"North\",\"__ggsql_aes_stroke__\":\"North\",\"__ggsql_aes_x__\":\"2023-09-26\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-25\",\"__ggsql_aes_y__\":14.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-30\",\"__ggsql_aes_y__\":55.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_panel__\":\"South\",\"__ggsql_aes_stroke__\":\"South\",\"__ggsql_aes_x__\":\"2023-10-31\",\"__ggsql_aes_y__\":6.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-11\",\"__ggsql_aes_y__\":15.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-15\",\"__ggsql_aes_y__\":58.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_panel__\":\"East\",\"__ggsql_aes_stroke__\":\"East\",\"__ggsql_aes_x__\":\"2023-11-20\",\"__ggsql_aes_y__\":7.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-05\",\"__ggsql_aes_y__\":16.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-10\",\"__ggsql_aes_y__\":60.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_panel__\":\"West\",\"__ggsql_aes_stroke__\":\"West\",\"__ggsql_aes_x__\":\"2023-12-15\",\"__ggsql_aes_y__\":7.0,\"__ggsql_source__\":\"__ggsql_layer_1__\"}]},\"facet\":{\"field\":\"__ggsql_aes_panel__\",\"header\":{\"labelExpr\":\"datum.value == 'South' ? 'South' : datum.value == 'West' ? 'West' : datum.value == 'East' ? 'East' : datum.value == 'North' ? 'North' : datum.value\"},\"sort\":[\"East\",\"North\",\"South\",\"West\"],\"type\":\"nominal\"},\"height\":\"container\",\"spacing\":10.0,\"spec\":{\"layer\":[{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_panel__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"}],\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'West' ? 'West' : datum.label == 'South' ? 'South' : datum.label == 'East' ? 'East' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-29\",\"2023-12-31\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '30' ? '30' : datum.label == '40' ? '40' : datum.label == '50' ? '50' : datum.label == '20' ? '20' : datum.label == '60' ? '60' : datum.label == '10' ? '10' : datum.label\",\"values\":[10.0,20.0,30.0,40.0,50.0,60.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[0.1499999999999999,62.85],\"zero\":false},\"title\":\"Total Quantity\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"line\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]},{\"encoding\":{\"detail\":[{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_panel__\",\"type\":\"nominal\"},{\"field\":\"__ggsql_aes_stroke__\",\"type\":\"nominal\"}],\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'East' ? 'East' : datum.label == 'North' ? 'North' : datum.label == 'West' ? 'West' : datum.label == 'South' ? 'South' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"stroke\":{\"field\":\"__ggsql_aes_stroke__\",\"legend\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'West' ? 'West' : datum.label == 'South' ? 'South' : datum.label == 'East' ? 'East' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"x\":{\"axis\":{\"labelExpr\":\"timeFormat(datum.value, '%Y-%m-%d') == '2023-05-01' ? '2023-05-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-07-01' ? '2023-07-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-01-01' ? '2023-01-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-03-01' ? '2023-03-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-09-01' ? '2023-09-01' : timeFormat(datum.value, '%Y-%m-%d') == '2023-11-01' ? '2023-11-01' : datum.label\",\"values\":[\"2023-01-01\",\"2023-03-01\",\"2023-05-01\",\"2023-07-01\",\"2023-09-01\",\"2023-11-01\"]},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"2022-12-29\",\"2023-12-31\"],\"zero\":false},\"title\":\"Date\",\"type\":\"temporal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '30' ? '30' : datum.label == '40' ? '40' : datum.label == '50' ? '50' : datum.label == '20' ? '20' : datum.label == '60' ? '60' : datum.label == '10' ? '10' : datum.label\",\"values\":[10.0,20.0,30.0,40.0,50.0,60.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[0.1499999999999999,62.85],\"zero\":false},\"title\":\"Total Quantity\",\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"point\"},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_1__\",\"field\":\"__ggsql_source__\"}}]}]},\"title\":\"Sales Trends by Region\",\"width\":\"container\"};\n    const visId = 'vis-1771589202658';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n### Multi-Category Analysis\n\n::: {#311c7f73 .cell execution_count=40}\n``` {.ggsql .cell-code}\nSELECT\n    category,\n    region,\n    SUM(revenue) as total_revenue\nFROM 'sales.csv'\nGROUP BY category, region\nVISUALISE category AS x, total_revenue AS y, region AS fill\nDRAW bar\nLABEL \n    title => 'Revenue by Category and Region', \n    x => 'Category', \n    y => 'Revenue ($)'\n```\n\n::: {.cell-output .cell-output-display execution_count=40}\n```{=html}\n<div id=\"vis-1771589202739\"></div>\n<script type=\"text/javascript\">\n  (function() {\n    const spec = {\"$schema\":\"https://vega.github.io/schema/vega-lite/v6.json\",\"config\":{\"axis\":{\"domain\":false,\"grid\":true,\"gridColor\":\"#FFFFFF\",\"gridWidth\":1,\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"tickColor\":\"#333333\",\"tickSize\":4,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":10},\"header\":{\"labelColor\":\"#000000\",\"labelFontSize\":15,\"labelFontWeight\":\"normal\",\"labelPadding\":5,\"title\":null},\"legend\":{\"labelColor\":\"#4D4D4D\",\"labelFontSize\":12,\"rowPadding\":6,\"titleColor\":\"#000000\",\"titleFontSize\":15,\"titleFontWeight\":\"normal\",\"titlePadding\":8},\"title\":{\"anchor\":\"start\",\"color\":\"#000000\",\"fontSize\":18,\"fontWeight\":\"normal\",\"frame\":\"group\",\"offset\":10,\"subtitleColor\":\"#4D4D4D\",\"subtitleFontSize\":15,\"subtitleFontWeight\":\"normal\"},\"view\":{\"fill\":\"#EBEBEB\",\"stroke\":null}},\"data\":{\"values\":[{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":5400.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":5100.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"South\",\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":3400.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":6300.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":6300.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"West\",\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":4050.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":4600.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_x__\":\"Clothing\",\"__ggsql_aes_y__\":5700.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":3100.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_x__\":\"Furniture\",\"__ggsql_aes_y__\":3750.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"North\",\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":4500.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"},{\"__ggsql_aes_fill__\":\"East\",\"__ggsql_aes_x__\":\"Electronics\",\"__ggsql_aes_y__\":6000.0,\"__ggsql_aes_yend__\":0.0,\"__ggsql_source__\":\"__ggsql_layer_0__\"}]},\"height\":\"container\",\"layer\":[{\"encoding\":{\"detail\":{\"field\":\"__ggsql_aes_fill__\",\"type\":\"nominal\"},\"fill\":{\"field\":\"__ggsql_aes_fill__\",\"legend\":{\"labelExpr\":\"datum.label == 'North' ? 'North' : datum.label == 'South' ? 'South' : datum.label == 'East' ? 'East' : datum.label == 'West' ? 'West' : datum.label\"},\"scale\":{\"domain\":[\"East\",\"North\",\"South\",\"West\"],\"range\":[\"#0067A5\",\"#F3C300\",\"#008856\",\"#F38400\"]},\"title\":\"region\",\"type\":\"nominal\"},\"width\":{\"value\":0.9},\"x\":{\"axis\":{\"labelExpr\":\"datum.label == 'Electronics' ? 'Electronics' : datum.label == 'Furniture' ? 'Furniture' : datum.label == 'Clothing' ? 'Clothing' : datum.label\"},\"field\":\"__ggsql_aes_x__\",\"scale\":{\"domain\":[\"Clothing\",\"Electronics\",\"Furniture\"],\"zero\":false},\"title\":\"Category\",\"type\":\"nominal\"},\"y\":{\"axis\":{\"labelExpr\":\"datum.label == '0' ? '0' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[0.0,2000.0,4000.0,6000.0]},\"field\":\"__ggsql_aes_y__\",\"scale\":{\"domain\":[-315.0,6615.0],\"zero\":false},\"title\":\"Revenue ($)\",\"type\":\"quantitative\"},\"y2\":{\"axis\":{\"labelExpr\":\"datum.label == '0' ? '0' : datum.label == '2000' ? '2000' : datum.label == '4000' ? '4000' : datum.label == '6000' ? '6000' : datum.label\",\"values\":[0.0,2000.0,4000.0,6000.0]},\"field\":\"__ggsql_aes_yend__\",\"scale\":{\"domain\":[-315.0,6615.0]},\"title\":null,\"type\":\"quantitative\"}},\"mark\":{\"clip\":true,\"type\":\"bar\",\"width\":{\"band\":0.9}},\"transform\":[{\"filter\":{\"equal\":\"__ggsql_layer_0__\",\"field\":\"__ggsql_source__\"}}]}],\"title\":\"Revenue by Category and Region\",\"width\":\"container\"};\n    const visId = 'vis-1771589202739';\n    const container = document.getElementById(visId);\n    container.style.width = '100%';\n    container.style.height = '400px';\n\n    // Use full height in Positron's Plots pane\n    if (container.closest('.positron-output-container')) {\n      container.style.height = '100vh';\n    }\n\n    const options = {\n      \"actions\": true,\n    };\n\n    // Check if we're in a Jupyter environment with require.js\n    if (typeof window.requirejs !== 'undefined') {\n      // Use require.js to load Vega libraries\n      window.requirejs.config({\n        paths: {\n          'dom-ready': 'https://cdn.jsdelivr.net/npm/domready@1/ready.min',\n          'vega': 'https://cdn.jsdelivr.net/npm/vega@6/build/vega.min',\n          'vega-lite': 'https://cdn.jsdelivr.net/npm/vega-lite@6.4.1/build/vega-lite.min',\n          'vega-embed': 'https://cdn.jsdelivr.net/npm/vega-embed@7/build/vega-embed.min'\n        }\n      });\n\n      function docReady(fn) {\n        if (document.readyState === 'complete') fn();\n        else window.addEventListener(\"load\", () => {\n          fn();\n        });\n      }\n      docReady(function() {\n        window.requirejs([\"dom-ready\", \"vega\", \"vega-embed\"], function(domReady, vega, vegaEmbed) {\n            domReady(function () {\n              vegaEmbed('#' + visId, spec, options).catch(console.error);\n            });\n        });\n      });\n    } else {\n      // Fallback for non-Jupyter environments\n      function loadScript(src) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = src;\n          script.onload = resolve;\n          script.onerror = reject;\n          document.head.appendChild(script);\n        });\n      }\n\n      Promise.all([\n        loadScript('https://cdn.jsdelivr.net/npm/vega@6'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-lite@6.4.1'),\n        loadScript('https://cdn.jsdelivr.net/npm/vega-embed@7')\n      ])\n        .then(() => {\n          vegaEmbed('#' + visId, spec, options)\n            .catch(console.error);\n        })\n        .catch(err => {\n          console.error('Failed to load Vega libraries:', err);\n        });\n    }\n  })();\n</script>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "examples_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}